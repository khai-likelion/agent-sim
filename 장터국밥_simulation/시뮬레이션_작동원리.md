# 망원동 상권 ABM 시뮬레이션 - 작동 원리 상세 설명

## 📖 목차

1. [전체 구조 개요](#전체-구조-개요)
2. [Persona (8개 세그먼트) 구성](#persona-구성)
3. [시간대 구분 (4블록)](#시간대-구분)
4. [실제 식당 데이터 로드](#실제-식당-데이터-로드)
5. [에이전트 의사결정 프로세스](#에이전트-의사결정-프로세스)
6. [LLM 프롬프트 구조](#llm-프롬프트-구조)
7. [리뷰 생성 메커니즘](#리뷰-생성-메커니즘)
8. [시뮬레이션 루프](#시뮬레이션-루프)
9. [Before/After 전략 비교](#beforeafter-전략-비교)

---

## 전체 구조 개요

### 시뮬레이션 플로우

```
1. 초기화
   ─ stores.csv에서 실제 망원동 식당 로드 (756개 → 샘플링)
   ├─ 8개 세그먼트별로 에이전트 생성 (N명)
   └─ OpenAI API 클라이언트 초기화├

2. 시뮬레이션 루프 (N일 반복)
   ├─ 각 타임블록 (아침/점심/저녁/야식)
   │   └─ 각 에이전트
   │       ├─ 세그먼트별 출현 확률로 활성화 여부 결정
   │       ├─ 동적 상태 업데이트 (배고픔, 시간압박)
   │       ├─ LLM 호출 → 식당 선택
   │       ├─ 방문 & 만족도 계산
   │       ├─ 메모리 업데이트
   │       └─ 리뷰 생성 (확률적)
   └─ 다음 날

3. 결과 집계
   └─ 방문 수, 세그먼트별, 타임블록별, 식당별 통계
```

### 핵심 컴포넌트

| 컴포넌트 | 역할 | 상세 |
|---------|------|------|
| **Agent** | 소비자 | 8개 세그먼트 중 하나, 수치적 특성 보유 |
| **Restaurant** | 식당 | stores.csv의 실제 데이터, 속성 추정 |
| **LLM** | 의사결정 엔진 | GPT-4o-mini로 식당 선택 |
| **Memory** | 과거 경험 | 에이전트가 방문한 식당 기록 |
| **Review** | 사회적 영향 | 리뷰 수/평점이 다른 에이전트 선택에 영향 |

---

## Persona 구성

### 8개 세그먼트 설계 철학

**왜 8개인가?**
- 4개 거주민 (R1~R4): 망원동에 사는 사람들
- 4개 유동인구 (F1~F4): 망원동을 방문하는 사람들

**다양성 확보 방법:**
- 세그먼트는 **8개로 고정**
- 각 세그먼트 내에서 **수치적 특성을 Beta 분포로 샘플링** → 개인차 표현
- 예: 같은 "1인 가구"여도 `solo_pref=0.9`인 사람과 `solo_pref=0.7`인 사람이 공존

### 세그먼트별 상세 프로필

#### R1: 1인 가구 거주민

**타겟 인물상:**
- 20대 후반~30대 직장인 또는 대학원생
- 혼자 살며 집 근처에서 식사 해결
- 단골집 2~3곳 정해놓고 반복 방문

**수치적 특성 (Beta 분포):**
```python
"solo_pref": (9.0, 1.5)
# → 평균 0.86, 대부분 0.7~0.95 사이
# → "혼밥 매우 선호"

"novelty_seeking": (2.0, 5.0)
# → 평균 0.29, 대부분 0.1~0.5
# → "새로운 곳보다 익숙한 곳"

"repeat_tolerance": (6.0, 2.0)
# → 평균 0.75
# → "같은 식당 자주 가도 OK"
```

**타임블록별 출현 확률:**
- 아침: 15% (주로 집에서)
- 점심: 25% (회사 근처, 망원이 직장이면)
- 저녁: 55% (퇴근 후 집 근처)
- 야식: 30% (혼술/야식)

**의사결정 경향:**
- 거리 **매우 중요** (집에서 500m 이내)
- 혼밥 가능한 곳 **필수**
- 리뷰보다는 **익숙함** 우선
- 빠르고 간편한 식사

---

#### R2: 2인 가구

**타겟 인물상:**
- 신혼부부 또는 동거 커플 (25~35세)
- 주중은 집밥, 주말은 외식
- 분위기 있는 곳 선호

**수치적 특성:**
```python
"visual_importance": (4.0, 2.5)
# → 평균 0.62
# → "비주얼 꽤 중요"

"comfort_importance": (4.0, 2.5)
# → "편안한 분위기 중시"

"novelty_seeking": (3.5, 2.8)
# → 평균 0.56
# → "적당히 새로운 곳도 시도"
```

**타임블록별 출현:**
- 아침: 10% (브런치 가끔)
- 점심: 20% (주말 점심)
- 저녁: 55% (주중/주말 저녁)
- 야식: 20% (주말 데이트 후)

**의사결정 경향:**
- **분위기/인테리어** 중요
- 2인 테이블 편한 곳
- 리뷰 평점 참고
- 가격대 중상

---

#### R3: 4인 가족

**타겟 인물상:**
- 부모 + 초등~중학생 자녀 2명
- 주말 가족 외식 위주
- 위생과 안전 최우선

**수치적 특성:**
```python
"hygiene_threshold": (10.0, 1.5)
# → 평균 0.87, 대부분 0.75~0.95
# → "위생 기준 매우 엄격"

"comfort_importance": (8.0, 1.8)
# → 평균 0.82
# → "편안하고 넓은 공간 필수"

"novelty_seeking": (2.0, 6.0)
# → 평균 0.25
# → "검증된 곳만"
```

**타임블록별 출현:**
- 아침: 5% (거의 집에서)
- 점심: 40% (주말 브런치/점심)
- 저녁: 65% (가족 외식 타임)
- 야식: 5% (거의 없음)

**의사결정 경향:**
- **위생 < threshold → 절대 불가**
- 아이들 먹을 메뉴
- 테이블 넓고 소음 적은 곳
- 주차 가능하면 더 좋음

---

#### R4: 출퇴근 거주민

**타겟 인물상:**
- 망원 거주, 강남/여의도 출퇴근
- 저녁 귀가 후 외식
- 주말에 망원 맛집 탐방

**수치적 특성:**
```python
"novelty_seeking": (4.5, 2.5)
# → 평균 0.64
# → "새로운 곳 적극 탐색"

"visual_importance": (4.5, 2.8)
# → "비주얼/분위기 중시"

"influence_sensitivity": (3.2, 2.4)
# → 평균 0.57
# → "리뷰 많이 참고"
```

**타임블록별 출현:**
- 아침: 10% (출근 전 카페)
- 점심: 5% (회사에서 먹음)
- 저녁: 65% (퇴근 후 망원 외식)
- 야식: 40% (주말 야식)

**의사결정 경향:**
- **트렌디한 곳** 선호
- 망리단길 핫플
- 인스타그래머블
- 리뷰 100개 이상 신뢰

---

#### F1: 데이트 커플

**타겟 인물상:**
- 망원 외부에서 데이트하러 옴
- 20대 중후반 커플
- 분위기 > 음식 맛

**수치적 특성:**
```python
"visual_importance": (12.0, 1.2)
# → 평균 0.91, 대부분 0.85~0.97
# → "비주얼 압도적 중요"

"solo_pref": (1.0, 12.0)
# → 평균 0.08
# → "혼밥 완전 회피"

"influence_sensitivity": (6.0, 2.0)
# → 평균 0.75
# → "리뷰/SNS 매우 민감"
```

**타임블록별 출현:**
- 아침: 5% (브런치 데이트)
- 점심: 30% (주말 점심 데이트)
- 저녁: 70% (저녁 데이트 피크)
- 야식: 25% (2차로 디저트)

**의사결정 경향:**
- **인스타그래머블 필수**
- 리뷰 사진 많이 확인
- 거리 덜 중요 (택시 OK)
- 가격대 중상~고가 OK

---

#### F2: 친구 모임

**타겟 인물상:**
- 친구 3~5명 모임
- 20대 후반~30대
- 공유 가능한 메뉴 (피자, 치킨, 고기)

**수치적 특성:**
```python
"visual_importance": (8.0, 2.0)
# → 평균 0.80
# → "사진 찍기 좋은 곳"

"stimulation_pref": (5.0, 2.0)
# → 평균 0.71
# → "자극적인 음식 선호"

"novelty_seeking": (6.0, 2.0)
# → "핫플 탐방"
```

**타임블록별 출현:**
- 아침: 3% (거의 없음)
- 점심: 25% (주말 점심 모임)
- 저녁: 65% (저녁 회식/모임)
- 야식: 50% (2차 치맥)

**의사결정 경향:**
- **공유 메뉴** (대용량)
- 시끄러워도 OK
- 술 가능한 곳
- 핫플레이스

---

#### F3: 외부 출근자

**타겟 인물상:**
- 타지역 거주, 망원 직장
- 점심시간 1시간
- 회사 근처 단골 3곳

**수치적 특성:**
```python
"repeat_tolerance": (10.0, 1.5)
# → 평균 0.87
# → "같은 곳 매일 가도 OK"

"novelty_seeking": (2.0, 7.0)
# → 평균 0.22
# → "새로운 곳 거의 안 감"

"solo_pref": (4.0, 2.5)
# → "혼밥 가능"
```

**타임블록별 출현:**
- 아침: 20% (출근길 아침)
- 점심: 85% (점심 피크)
- 저녁: 15% (야근 시)
- 야식: 5% (거의 퇴근)

**시간 압박:**
- 점심: 0.80 (매우 높음)
- → 빠른 회전, 가까운 거리

**의사결정 경향:**
- **거리 최우선** (회사 300m 이내)
- **빠른 서빙**
- 혼밥 OK
- 가성비

---

#### F4: 솔로 탐방객

**타겟 인물상:**
- 망원 맛집 탐방하러 혼자 옴
- 푸디/마니아 성향
- 숨은 맛집 찾기

**수치적 특성:**
```python
"solo_pref": (12.0, 1.2)
# → 평균 0.91
# → "혼밥 완전 편함"

"novelty_seeking": (10.0, 1.6)
# → 평균 0.86
# → "새로운 곳 최우선"

"review_propensity": (3.5, 2.5)
# → "리뷰 적극 작성"
```

**타임블록별 출현:**
- 아침: 5% (브런치)
- 점심: 35% (점심 탐방)
- 저녁: 60% (저녁 맛집)
- 야식: 25% (야식 맛집)

**의사결정 경향:**
- **숨은 맛집** (리뷰 적어도 OK)
- 혼밥 친화적
- 새로운 업종 시도
- 마니아 취향

---

## 시간대 구분

### 4개 타임블록

| 시간대 | 시간 | 특징 | 주요 세그먼트 |
|--------|------|------|--------------|
| **breakfast** | 7-10시 | 출근 전, 브런치 | F3 (출근자), R4 (카페) |
| **lunch** | 11-14시 | 점심시간 | F3 (피크), R1, F4 |
| **dinner** | 17-21시 | 저녁 식사 | 모든 세그먼트 (피크) |
| **late_night** | 21-24시 | 야식, 2차 | R1, R4, F2 (치맥) |

### 세그먼트별 타임블록 출현 확률

**예시: R1 (1인 가구)**
```python
"presence_by_timeblock": {
    "breakfast": 0.15,   # 15% 확률로 아침 외식
    "lunch": 0.25,       # 25% 확률로 점심 외식
    "dinner": 0.55,      # 55% 확률로 저녁 외식
    "late_night": 0.30   # 30% 확률로 야식
}
```

매 타임블록마다 각 에이전트는 **랜덤 샘플링**으로 활성화 여부 결정:
```python
if agent.rng.random() < presence_prob:
    # 이 타임블록에 활동
    choose_restaurant(...)
```

### 시간 압박 프로필

**세그먼트별 `time_pressure` 평균값:**

```python
# F3 (외부 출근자)
"time_pressure_profile": {
    "lunch": 0.80  # 점심시간 매우 촉박
}

# R1 (1인 가구)
"time_pressure_profile": {
    "lunch": 0.45,  # 점심 약간 바쁨
    "dinner": 0.25  # 저녁 여유
}
```

**time_pressure의 영향:**
- 높을수록 → 가까운 식당 선호
- LLM 프롬프트에 명시: "시간 압박 0.80 (매우 높음) → 빨리 먹어야 함"

---

## 실제 식당 데이터 로드

### stores.csv 구조

```csv
장소명,x,y,주소,ID,카테고리,그룹코드,전화번호,상세URL,상권,업종
일등식당,126.904339,37.560547,서울 마포구 망원동 476-1,16050121,음식점 > 한식 > 해장국,FD6,...
```

### 업종별 속성 추정 로직

실제 데이터에는 `hygiene_level`, `visual_score` 등이 없으므로 **휴리스틱으로 추정**:

```python
if '카페' in 업종:
    base_hygiene = 0.75      # 카페는 보통 깔끔
    base_visual = 0.85       # 비주얼 중시
    base_comfort = 0.80      # 편안한 공간
    base_solo = 0.90         # 혼자 오기 좋음
    base_stimulation = 0.20  # 자극적이지 않음

elif '한식' in 업종:
    base_hygiene = 0.65
    base_visual = 0.50
    base_comfort = 0.65
    base_solo = 0.70
    base_stimulation = 0.50

elif '호프' in 업종:
    base_hygiene = 0.60
    base_visual = 0.65
    base_comfort = 0.70
    base_solo = 0.30         # 혼자 가기 어려움
    base_stimulation = 0.65

# ... 등등
```

**랜덤성 추가:**
```python
hygiene = np.clip(base_hygiene + rng.normal(0, 0.10), 0, 1)
```
→ 같은 업종이어도 개별 식당마다 차이

### 초기 리뷰 수/평점

```python
initial_reviews = int(rng.exponential(50))  # 평균 50개, 지수분포
initial_score = rng.beta(5, 2)              # 평균 0.71 정도
```

→ 현실적인 분포 (대부분 50~100개, 일부 핫플은 200~300개)

---

## 에이전트 의사결정 프로세스

### 전체 플로우

```
1. 출현 여부 결정
   └─ presence_by_timeblock 확률로 샘플링

2. 동적 상태 업데이트
   ├─ hunger_level = Beta(3, 2)  # 평균 0.6
   └─ time_pressure = Normal(세그먼트별 평균, 0.15)

3. 후보 식당 필터링
   ├─ 거리 기반: 가까운 순 Top 10
   └─ (위생 기준은 LLM에게 맡김)

4. LLM 호출
   ├─ 프롬프트 생성 (에이전트 특성 + 식당 정보)
   ├─ GPT-4o-mini API 호출
   └─ 응답: 숫자 (0~9)

5. 선택된 식당 방문
   ├─ 만족도 계산
   ├─ 메모리 업데이트
   └─ 리뷰 생성 (확률적)
```

### 의사결정에 영향을 주는 요소

#### 1. 거리
- 에이전트의 현재 위치 (home_location 또는 work_location)
- 식당까지 유클리드 거리
- `time_pressure` 높으면 가까운 곳 우선

#### 2. 세그먼트 특성
- 프롬프트에 세그먼트 설명 포함
- 예: "1인 가구 거주민 - 혼밥 선호, 루틴 중시"
- LLM이 이 맥락을 이해하고 선택

#### 3. 과거 경험 (Memory)
```python
memory = {
    restaurant_id: {
        "last_visit_t": 3,           # 3일 전 마지막 방문
        "visit_count": 5,            # 총 5회 방문
        "satisfaction_ema": 0.78     # 평균 만족도 0.78
    }
}
```

프롬프트에 명시:
- "과거 5회 방문, 만족도 0.78"
- → LLM이 "익숙하고 만족스러웠던 곳" 인지

#### 4. 리뷰 수/평점
- `review_count`: 높을수록 인지도 ↑
- `avg_review_score`: 높을수록 신뢰도 ↑
- `influence_sensitivity` 높은 세그먼트(F1, F2)가 더 민감

#### 5. 새로움 (Novelty)
- `novelty_flag = 1.0` (신메뉴, 리뉴얼)
- `novelty_seeking` 높은 에이전트(F4, R4)가 선호

---

## LLM 프롬프트 구조

### 프롬프트 예시

```
# 고객
세그먼트: 1인 가구 거주민
설명: 혼자 사는 직장인 또는 학생. 혼밥 선호, 가까운 거리, 루틴 중시
주요 특성:
  - 집 근처 단골집 선호
  - 혼밥 가능한 곳 필수
  - 간편하고 빠른 식사
  - 가성비 중요

현재 상태:
- 시간대: 저녁 (17시-21시)
- 배고픔: 0.72
- 시간 압박: 0.25 (높을수록 빨리 먹어야 함)
- 위치: (126.9045, 37.5563)

# 선택 가능한 식당 (가까운 순)
0. 장터국밥 (한식음식점)
   거리: 15m | 리뷰 120개 (평점 0.72) | 과거 3회 방문, 만족도 0.78

1. 모던카페 (커피-음료)
   거리: 32m | 리뷰 250개 (평점 0.78)

2. 매운떡볶이 (한식음식점)
   거리: 48m | 리뷰 85개 (평점 0.68)

...

위 고객의 특성과 현재 상태를 고려하여 가장 방문할 가능성이 높은 식당 1곳을 선택하세요.
- 시간 압박이 높으면 가까운 곳
- 세그먼트 특성 반영 (예: 혼밥 선호 → 카페/간편식)
- 과거 만족도 높았으면 재방문 가능성 UP

출력: 숫자만 (예: 0)
선택:
```

### GPT 응답

```
0
```

→ 장터국밥 선택 (가깝고, 과거 만족도 높음, 혼밥 가능)

### 프롬프트 설계 원칙

1. **간결성**: 비용 절감 위해 핵심만
2. **맥락 제공**: 세그먼트 설명 + 특성
3. **명확한 출력 형식**: "숫자만"
4. **Fallback**: 파싱 실패 시 거리 기반 랜덤

---

## 리뷰 생성 메커니즘

### 리뷰 작성 확률

```python
p_review = review_propensity * (base + extreme_factor * |satisfaction - 0.5|)
```

**해석:**
- `review_propensity` 높은 세그먼트 (F1, F4)가 리뷰 많이 씀
- `satisfaction` 극단적일수록 (매우 좋거나 나쁘면) 리뷰 확률 ↑
- 예:
  - `review_propensity = 0.8`, `satisfaction = 0.9` → 거의 확실히 리뷰
  - `review_propensity = 0.3`, `satisfaction = 0.5` → 낮은 확률

### 리뷰 텍스트 생성

**간단한 템플릿 (비용 절약):**
```python
if satisfaction > 0.75:
    template = f"[{seg_name}] {restaurant.name} 정말 만족스러웠어요!"
elif satisfaction > 0.5:
    template = f"[{seg_name}] {restaurant.name} 괜찮았어요."
else:
    template = f"[{seg_name}] {restaurant.name} 아쉬웠어요."
```

**LLM 기반 (옵션):**
- 만족도 구성 요소 분석 (비주얼, 위생 등)
- 프롬프트: "이 고객이 남길 리뷰 1~2문장"
- GPT 응답: "혼자 먹기 부담없고 깔끔해서 자주 오게 돼요!"

### 리뷰 확산 (Review Diffusion)

```
에이전트 A → 식당 방문 → 리뷰 작성
→ 식당.review_count += 1
→ 식당.avg_review_score 업데이트 (EMA)

→ 다음 타임블록에 에이전트 B가 선택 시
   → LLM 프롬프트에 "리뷰 121개 (평점 0.73)"
   → B의 influence_sensitivity 높으면 선택 확률 ↑

→ 양의 피드백 루프
```

---

## 시뮬레이션 루프

### 슈도코드

```python
for day in range(n_days):
    for timeblock in ["breakfast", "lunch", "dinner", "late_night"]:
        for agent in agents:
            # 1. 출현 여부
            if random() > presence_by_timeblock[timeblock]:
                continue  # 이번 블록 활동 안 함

            # 2. 상태 업데이트
            agent.hunger_level = Beta(3, 2)
            agent.time_pressure = Normal(세그먼트별 평균, 0.15)

            # 3. 식당 선택 (LLM)
            chosen_restaurant = llm_choose_restaurant(agent, restaurants, ...)

            # 4. 방문
            satisfaction = compute_satisfaction(agent, chosen_restaurant)

            # 5. 메모리 업데이트
            update_memory(agent, chosen_restaurant, satisfaction)

            # 6. 리뷰 생성 (확률적)
            if random() < p_review:
                review = generate_review(...)
                chosen_restaurant.review_count += 1
                chosen_restaurant.avg_review_score = EMA_update(...)
```

### 하루 예시

**Day 0, breakfast:**
- 총 30명 에이전트
- breakfast 출현률 평균 10% → 약 3명 활동
- 3명이 각자 LLM으로 식당 선택 → 방문
- 리뷰 생성 확률 30% → 1명 정도 리뷰 작성

**Day 0, lunch:**
- 출현률 평균 30% → 약 9명 활동
- F3 (외부 출근자)가 85% 출현 → 대부분 활동
- → 회사 근처 식당 집중 방문

**Day 0, dinner:**
- 출현률 평균 60% → 약 18명 활동 (피크)
- 다양한 세그먼트 활동
- → 리뷰 가장 많이 생성

**Day 0, late_night:**
- 출현률 평균 25% → 약 7명
- R1, F2 (야식족) 위주

---

## Before/After 전략 비교

### 실험 설계

**Before (Baseline):**
- 모든 식당 그대로
- 에이전트 30명 × 5일
- 시뮬레이션 실행 → metrics_before

**After (Strategy):**
- **타겟 식당 1곳 선정** (예: "장터국밥", ID=16050121)
- 전략 적용:
  ```python
  strategy = {
      "target_restaurant_id": 16050121,
      "improve_hygiene": True,    # hygiene_level +0.15
      "new_menu": True,           # novelty_flag = 1.0
      "improve_visual": True      # visual_score +0.12
  }
  ```
- 동일 조건 (같은 seed, 에이전트)으로 재실행 → metrics_after

### 전략의 효과

#### 1. 직접 효과
- **hygiene_level** ↑ → R3 (가족) 선택 확률 ↑
- **visual_score** ↑ → F1 (커플), F2 (모임) 선택 확률 ↑
- **novelty_flag** ↑ → F4 (탐방객), R4 (출퇴근) 선택 확률 ↑

#### 2. 간접 효과 (리뷰 확산)
```
방문 증가
→ 리뷰 수 증가
→ LLM 프롬프트에 "리뷰 150개 (평점 0.75)"
→ influence_sensitivity 높은 세그먼트 (F1, F2)가 더 인지
→ 추가 방문 증가
→ 양의 피드백 루프
```

### 측정 지표

| 지표 | Before | After | 변화 |
|------|--------|-------|------|
| 타겟 방문 수 | 95 | 142 | +47 (49% ↑) |
| 타겟 리뷰 수 | 125 | 163 | +38 |
| 타겟 평점 | 0.72 | 0.76 | +0.04 |
| 전체 방문 수 | 1250 | 1287 | +37 (3% ↑) |

**해석:**
- 타겟 식당 방문 49% 증가 (직접 효과)
- 전체 방문은 3% 증가 (파이 확대)
- 세그먼트별로는 F1 (+15), R3 (+12) 가장 큰 반응

### 세그먼트별 반응 차이

```python
# Before vs After 타겟 방문 수
R1_OnePerson:        12 → 15  (+3)   # 미미
R2_TwoPeople:         8 → 11  (+3)
R3_FamilyFour:        6 → 18  (+12)  # 위생 개선 효과
R4_CommuterResident: 10 → 15  (+5)
F1_DateCouple:       18 → 33  (+15)  # 비주얼 개선 효과
F2_SocialGroup:      15 → 22  (+7)
F3_IncomingWorker:   20 → 20  (0)    # 거의 변화 없음 (루틴)
F4_SoloVisitor:       6 → 8   (+2)   # 새로움 추구
```

---

## 시뮬레이션 파라미터 조정 가이드

### 에이전트 수

```python
N_AGENTS = 30  # 적음 (빠른 테스트, LLM 비용 낮음)
N_AGENTS = 100 # 중간 (현실적)
N_AGENTS = 500 # 많음 (통계적 안정성)
```

**권장:** 30~50명으로 시작, 결과 안정적이면 증가

### 시뮬레이션 기간

```python
N_DAYS = 5   # 짧음 (빠른 반복)
N_DAYS = 30  # 1개월 (현실적)
N_DAYS = 90  # 3개월 (장기 효과)
```

**권장:** 5일로 프로토타입, 30일로 최종

### 식당 샘플 수

```python
load_restaurants_from_csv(csv_path, sample_size=50)   # 50개
load_restaurants_from_csv(csv_path, sample_size=200)  # 200개
load_restaurants_from_csv(csv_path, sample_size=None) # 전체 756개
```

**권장:** 50개 (LLM 프롬프트 길이 관리)

### LLM 모델 선택

```python
model="gpt-4o-mini"   # 빠르고 저렴 (권장)
model="gpt-4o"        # 더 정확하지만 비쌈
model="gpt-3.5-turbo" # 가장 저렴
```

---

## 확장 아이디어

### 1. 가격 민감도
```python
agent.price_sensitivity: float
restaurant.price_avg: int

# 프롬프트에 추가
"가격: 12,000원 (고객 가격 민감도: 0.8)"
```

### 2. 날씨 효과
```python
weather = "rainy"  # 비 오는 날
→ presence_by_timeblock 전체 0.7배
→ max_radius 감소 (가까운 곳만)
```

### 3. 프로모션 이벤트
```python
restaurant.promotion = {
    "discount": 0.2,  # 20% 할인
    "duration": (5, 10)  # 5일~10일
}
```

### 4. 소셜 네트워크
```python
agent.friends = [agent_id_2, agent_id_5]
# 친구가 좋아한 식당 → 선택 확률 ↑
```

---

## 요약

이 시뮬레이션은 다음과 같이 작동합니다:

1. **8개 Persona**: 세그먼트별로 특성 Beta 분포 샘플링 → 다양성
2. **4개 시간대**: 아침/점심/저녁/야식, 세그먼트별 출현 확률
3. **실제 데이터**: stores.csv 756개 식당 → 업종별 속성 추정
4. **LLM 의사결정**: 에이전트 특성 + 상황 → GPT가 선택
5. **메모리 & 리뷰**: 과거 경험 기억, 리뷰로 사회적 영향
6. **Before/After**: 전략 적용 → 효과 측정

**핵심:** 수치적 특성 + 자연어 맥락 → LLM → 인간다운 행동 창발
