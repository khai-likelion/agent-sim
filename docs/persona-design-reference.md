# 망원동 상권 에이전트 페르소나 설계 레퍼런스

> 본 문서는 시뮬레이션에 사용되는 160개 페르소나의 설계 원칙, 조합 논리, 이동 방식을 상세히 기술한다.
> 구현체: `src/simulation_layer/persona/agent.py` · `personas_160.json`

---

## 1. 설계 목적

본 시뮬레이션은 **망원동 상권에서 발생하는 다양한 소비 집단의 의사결정 구조를 재현**하기 위해
**"세대 × 인원 × 방문 목적"을 기준**으로 페르소나를 체계적으로 구성하였다.

단순한 연령·성별 분류가 아닌, 아래 5가지 차원이 복합적으로 반영된 집단 행동 모델이다.

| 차원 | 내용 |
|------|------|
| 집단의 권력 구조 | 의사결정 주도 세대 (Z₁ / S 등) |
| 소비 목적 | 반복 소비 vs 이벤트성 방문 vs 업무 동반 |
| 거리·가격 민감도 | 근거리 상주형 vs 원거리 유입형 |
| 재방문 성향 | 습관 기반 vs 탐색 기반 |
| 운영·변화에 대한 반응 | 인테리어·메뉴·서비스 변화 반응성 |

---

## 2. 1차 분류: 방문 목적 기반 4대 유형

| 유형 | 핵심 정의 | 주요 방문 시간대 | 의사결정 고려사항 | Outside Option | 거리 허용도 | 지출 수준 | 재방문 성향 | 운영·변화 민감도 | 시뮬레이션 역할 |
|------|-----------|-----------------|-------------------|----------------|-------------|-----------|-------------|-----------------|----------------|
| **생활베이스형** | 망원 인근 거주, 평일 반복 소비 | 평일 점심/저녁 | 거리, 가격, 대기 | 집밥/배달 | 매우 낮음 (근거리 선호) | 낮음~중간 | 높음 | 동선·회전율에 민감 | 평일 매출 바닥선 |
| **사적모임형** | 주말 중심, 감성·SNS 목적, 친목 도모 | 주말/야간 | 분위기, 후기 | 안 감/다른 활동 | 제한 없음 | 제한 없음 | 낮음 | 인테리어·메뉴 변화에 매우 민감 | 주말 피크·변동성 |
| **공적모임형** | 회식·업무 모임 | 평일 저녁 | 품질, 서비스, 좌석 | 방문 취소 | 제한 없음 | 제한 없음 | 중간 | 서비스·공간 업그레이드에만 반응 | 객단가 상승 |
| **가족모임형** | 유자녀·다가구, 안정적 소비 | 주말/이른 저녁 | 공간, 메뉴 폭 | 집밥 | 제한 없음 | 제한 없음 | 높음 | 가족 친화 요소에 민감 | 안정적 재방문 |

---

## 3. 2차 분류: 세대 구조

| 세대 코드 | 연령대 | 소비 특성 |
|-----------|--------|-----------|
| **Z₁** | 0~19세 | 보호 필요, 자극 선호. 동반 성인의 의사결정에 강한 영향 |
| **Z₂** | 20~28세 | 탐색성 높음, SNS·후기 민감. 신규 방문 비율 높음 |
| **Y** | 29~44세 | 품질·가성비 균형. 재방문율 중간 |
| **X** | 45~60세 | 안정성·서비스 중시. 리뷰보다 직접 경험 우선 |
| **S** | 60세 이상 | 보수적·위생 민감. 변화에 저항, 단골 형성 강함 |

> **혼합 세대 페르소나**: 가족모임형(2인/4인)의 경우 S와 Z₁의 존재 유무에 따라 집단의 의사결정 주도 세대가 달라진다.
> 이를 `special_condition` 필드로 구분하며, 분석 시 4가지 레이블로 세분화된다.
>
> | special_condition 값 | 분석 레이블 |
> |----------------------|-------------|
> | `S포함_Z1포함` | `혼합(S, Z1)` |
> | `S포함_Z1미포함` | `혼합(S, Z1미포함)` |
> | `S미포함_Z1포함` | `혼합(S미포함, Z1)` |
> | `S미포함_Z1미포함` | `혼합(S미포함, Z1미포함)` |

---

## 4. 3차 분류: 인원 구성

인원은 단순 숫자가 아니라 **집단 의사결정 구조를 형성하는 핵심 변수**로 작용한다.

| 인원 | 의사결정 구조 |
|------|---------------|
| **1인** | 완전 자율 결정. 개인 선호가 100% 반영 |
| **2인** | 협의 구조. 주도 세대 또는 방문 목적이 결정 |
| **4인** | 집단 의사결정. 특정 세대(S, Z₁)가 존재하면 해당 세대로 메뉴·장소 수렴 |

---

## 5. 조합 구조 및 경우의 수

### 1인

| 유형 | 세대 조합 | 성별 | 에이전트 구분 | 소계 |
|------|-----------|------|---------------|------|
| 생활베이스형 | Z₁, Z₂, Y, X, S (5종) | 남/여 | 상주+유동 각 | **20가지** |
| 사적모임형 | Z₁, Z₂, Y, X, S (5종) | 남/여 | — | **10가지** |
| **소계** | | | | **30가지** |

### 2인

| 유형 | 세대 조합 | 성별 | 에이전트 구분 | 소계 |
|------|-----------|------|---------------|------|
| 생활베이스형 | Z₁, Z₂, Y (3종) | 남/여/혼성 | — | **9가지** |
| 사적모임형 | Z₁×3, Z₂×3, Y×3, X×3, S×1 | 남/여/혼성 (S는 혼성만) | — | **13가지** |
| 가족모임형 | S(o)Z₁(o)×2, S(o)Z₁(x)×1, S(x)Z₁(o)×3, S(x)Z₁(x)×12 | 조합별 상이 | 상주+유동 | **36가지** |
| **소계** | | | | **58가지** |

> **가족모임형 2인 세부 논리**
> - `S(o)Z₁(o)` 2가지: Z₁이 남/여인지에 따라 의사결정 주도 세대 변화
> - `S(o)Z₁(x)` 1가지: Z₁ 없음, S의 입맛에 수렴 → 성별 구분 불필요
> - `S(x)Z₁(o)` 3가지: Z₁이 남/여/혼성인지에 따라 분화
> - `S(x)Z₁(x)` 12가지: Z₂, Y, X 동일 세대(남/여/혼성 3×3=9) + 혼합 세대(남/여/혼성=3)

### 4인

| 유형 | 세대 조합 | 성별 | 에이전트 구분 | 소계 |
|------|-----------|------|---------------|------|
| 생활베이스형 | Z₁, Z₂, Y (3종) | 남/여/혼성 | — | **9가지** |
| 사적모임형 | Z₁×3, Z₂×3, Y×3, X×3, S×1 | 남/여/혼성 (S는 혼성만) | — | **13가지** |
| 공적모임형 | Z₂, Y, X 동일 세대(3×3=9) + Z₂YX 혼합(3) | 혼성만 | — | **12가지** |
| 가족모임형 | S(o)Z₁(o)×3, S(o)Z₁(x)×1, S(x)Z₁(o)×3, S(x)Z₁(x)×12 | 조합별 상이 | 상주+유동 | **38가지** |
| **소계** | | | | **72가지** |

> **공적모임형 4인 세부 논리**
> - S·Z₁은 직장 회식 모임에 포함되지 않는다고 가정 (퇴직자/미성년)
> - 동일 세대(Z₂·Y·X) 남/여/혼성 → 3×3=9가지
> - 세대 혼합(Z₂+Y, Z₂+X, Y+X) 시 성별보다 메뉴 협의가 우선 → 혼성 1가지씩 × 3조합 = 3가지

---

## 6. 총 페르소나 수

| 분류 | 수 |
|------|----|
| 1인 | 30가지 |
| 2인 | 58가지 |
| 4인 | 72가지 |
| **합계** | **160가지** |

> 초기 설계안 113가지에서 가족모임형 상주/유동 분리 및 세대 조합 세분화를 통해 최종 **160가지**로 확장되었다.

---

## 7. 에이전트 이동 및 초기 위치 설정

에이전트는 **상주(Resident)** 와 **유동(Floating)** 두 가지 이동 방식으로 구분된다.

### 7-1. 유동 에이전트

망원동 외부에서 유입되는 방문객. 망원역·버스 정류장·한강 진입로 중 하나를 랜덤으로 진입 지점으로 설정한다.

| 진입 지점 (FLOATING_LOCATIONS) | 좌표 | 설명 |
|-------------------------------|------|------|
| MANGWON_STATION | 37.5561, 126.9101 | 망원역 |
| STATION_STOP | 37.5561, 126.9103 | 역 인근 정류장 |
| MARKET_STOP | 37.5576, 126.9059 | 망원시장 정류장 |
| ENTRANCE_STOP | 37.5579, 126.9073 | 망원동 입구 정류장 |
| RIVER_ENTRY_STOP | 37.5507, 126.9126 | 한강 진입 정류장 |
| MANGWON_HANGANG_PARK_ENTRANCE | 37.5510, 126.8989 | 망원 한강공원 입구 |

**진입 시간대 (entry_time_slot)** 는 방문 목적에 따라 다르게 설정된다:

| 방문 목적 | 진입 시간대 |
|-----------|-------------|
| 공적모임형 | 점심 (직장인 패턴) |
| 사적모임형 | 점심 또는 저녁 (랜덤) |
| 가족모임형 | 아침 또는 점심 (랜덤) |
| 생활베이스형 | 아침·점심·저녁 (랜덤) |

### 7-2. 상주 에이전트

망원동 내 거주자. 주거 유형에 따라 해당 좌표에서 **반경 150m 이내 랜덤 오프셋**을 적용하여 에이전트마다 미세하게 다른 위치에서 출발한다.

| 주거 유형 | 좌표 후보 | 오프셋 반경 |
|-----------|-----------|-------------|
| 아파트 (3곳) | 37.5587/126.8987, 37.5534/126.9048, 37.5597/126.9010 | ±150m |
| 빌라·다세대 (3곳) | 37.5540/126.9034, 37.5557/126.9040, 37.5547/126.9087 | ±150m |
| 단독·연립(주택) (3곳) | 37.5551/126.9078, 37.5550/126.9027, 37.5528/126.9058 | ±150m |

> 가족모임형 4인 상주 에이전트는 **아파트** 주거 유형으로 고정 (넓은 공간 거주 가정).

### 7-3. 이동 방식 요약

```
유동 에이전트
  └─ 6개 진입 지점 중 1개 랜덤 선택
  └─ home_location = (0.0, 0.0)  ← 거주지 없음

상주 에이전트
  └─ 주거 유형에 따라 3개 좌표 후보 중 1개 랜덤 선택
  └─ 중심 좌표에서 반경 150m 이내 랜덤 오프셋 적용
  └─ 에이전트마다 미세하게 다른 출발점 → 의사결정 다양성 확보
```

---

## 8. 구현 파일 참조

| 항목 | 파일 | 위치 |
|------|------|------|
| 페르소나 정의 | `src/simulation_layer/persona/personas_160.json` | 전체 160개 페르소나 JSON |
| 에이전트 클래스 | `src/simulation_layer/persona/agent.py` | `GenerativeAgent` dataclass |
| 위치 상수 | `src/simulation_layer/persona/agent.py` | `FLOATING_LOCATIONS`, `RESIDENT_LOCATIONS` |
| JSON 로더 | `src/simulation_layer/persona/agent.py` | `load_personas_from_json()` |
| 시뮬레이션 실행 | `scripts/run_generative_simulation.py` | `generate_agents()`, `run_simulation()` |
| 전후 비교 실행 | `scripts/run_before_after_sim.py` | `run_before_after_comparison()` |
| 분석 보고서 | `sim_to_y.py` | `ComparisonReportGenerator` |
