# SCRUM-20: 64ì¢… ì•„í‚¤íƒ€ì… + 3ë‹¨ê³„ LLM ì˜ì‚¬ê²°ì • ì‹œìŠ¤í…œ

## ê°œìš”

ë§ì›ë™ ì—ì´ì „íŠ¸ ì‹œë®¬ë ˆì´ì…˜ì˜ í•µì‹¬ ì•„í‚¤í…ì²˜ë¥¼ ê°œì„ í•˜ì—¬, ë” í˜„ì‹¤ì ì´ê³  ë‹¤ì–‘í•œ ì†Œë¹„ì í–‰ë™ì„ ì‹œë®¬ë ˆì´ì…˜í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

---

## 1. 64ì¢… ì•„í‚¤íƒ€ì… ì‹œìŠ¤í…œ

### êµ¬ì„± ìš”ì†Œ

```
8 ì„¸ê·¸ë¨¼íŠ¸ Ã— 4 ë¯¸ê°ì„±í–¥ Ã— 2 ìƒí™œì–‘ì‹ = 64 ì•„í‚¤íƒ€ì…
```

### 1.1 ì„¸ê·¸ë¨¼íŠ¸ (8ì¢…)

| ìœ í˜• | ì„¸ê·¸ë¨¼íŠ¸ | ì„¤ëª… | ê°€ì¤‘ì¹˜ |
|------|----------|------|--------|
| ìƒì£¼ | 1ì¸ê°€êµ¬ | í˜¼ë°¥/í˜¼ìˆ  ë¬¸í™”, ë°°ë‹¬ì•± ì‚¬ìš© ë¹ˆë„ ë†’ìŒ | 15% |
| ìƒì£¼ | 2ì¸ê°€êµ¬ | ì‹ í˜¼/ë™ê±°ì»¤í”Œ, ì£¼ë§ ë¸ŒëŸ°ì¹˜ ì„ í˜¸ | 12% |
| ìƒì£¼ | 4ì¸ê°€êµ¬ | ìë…€ ìˆëŠ” ê°€ì •, ê°€ì¡± ì™¸ì‹ ì„ í˜¸ | 10% |
| ìƒì£¼ | ì™¸ë¶€ì¶œí‡´ê·¼ì§ì¥ì¸ | íƒ€ì§€ì—­ ì¶œí‡´ê·¼, ì €ë…/ì£¼ë§ ë™ë„¤ ì´ìš© | 13% |
| ìœ ë™ | ë°ì´íŠ¸ì»¤í”Œ | ë¶„ìœ„ê¸°, SNS ê°ì„±, ë””ì €íŠ¸ ì¹´í˜ ì„ í˜¸ | 15% |
| ìœ ë™ | ì•½ì†ëª¨ì„ | ë‹¨ì²´ì„, 2ì°¨ ë™ì„  ê³ ë ¤ | 12% |
| ìœ ë™ | ë§ì›ìœ ì…ì§ì¥ì¸ | ì ì‹¬/ì €ë… ì‹ì‚¬ ìœ„í•´ ìœ ì… | 13% |
| ìœ ë™ | í˜¼ìë°©ë¬¸ | ì¹´í˜, ì„œì , í˜¼ë°¥ ê°€ëŠ¥ ì‹ë‹¹ | 10% |

### 1.2 ë¯¸ê°ì„±í–¥ (4ì¢…)

| ë¯¸ê°ì„±í–¥ | ì„¤ëª… | ì„ í˜¸ ìŒì‹ |
|----------|------|-----------|
| **ìê·¹ì„ í˜¸** | ë§µê³  ìê·¹ì ì¸ ë§›, ë§¤ìš´ë§› ë„ì „ | ë§ˆë¼íƒ•, ë–¡ë³¶ì´, ë‹­ë°œ, ê³±ì°½, ì§¬ë½• |
| **ë‹´ë°±ê±´ê°•** | ê±´ê°•í•˜ê³  ë‹´ë°±í•œ ë§›, ì¬ë£Œ ë³¸ì—°ì˜ ë§› | ìƒëŸ¬ë“œ, í¬ì¼€, ì¹¼êµ­ìˆ˜, ì„¤ë íƒ•, ì¼ì‹ |
| **ë¯¸ì‹íƒêµ¬** | ìƒˆë¡œìš´ ë§› ê²½í—˜, ê³ ê¸‰ ìŒì‹ ì¶”êµ¬ | ì˜¤ë§ˆì¹´ì„¸, íŒŒì¸ë‹¤ì´ë‹, ìŠ¤ì‹œ, ìŠ¤í…Œì´í¬ |
| **í¸ì•ˆí•œë§›** | ìµìˆ™í•˜ê³  í¸ì•ˆí•œ ë§›, ì–´ë¨¸ë‹ˆ ì†ë§› | êµ­ë°¥, ë°±ë°˜, ê¹€ì¹˜ì°Œê°œ, ë¹„ë¹”ë°¥, ëˆê¹ŒìŠ¤ |

### 1.3 ìƒí™œì–‘ì‹ (2ì¢…)

| ìƒí™œì–‘ì‹ | ì„¤ëª… | í–‰ë™ íŠ¹ì„± |
|----------|------|-----------|
| **ë‹¨ì¡°ë¡œìš´íŒ¨í„´** | ìµìˆ™í•œ ë‹¨ê³¨ì§‘ ë°˜ë³µ ë°©ë¬¸ | ìƒˆë¡œìš´ ê³³ ì‹œë„ì— ì†Œê·¹ì , ì¶©ì„±ë„ ë†’ìŒ |
| **ë³€í™”ì¶”êµ¬** | ìƒˆë¡œìš´ ë§›ì§‘ íƒë°© | SNS í•«í”Œ ë¯¼ê°, ë¦¬ë·° ì ê·¹ ì°¸ê³  |

---

## 2. 3ë‹¨ê³„ LLM ì˜ì‚¬ê²°ì • ì²´ì¸

ì—ì´ì „íŠ¸ì˜ ì˜ì‚¬ê²°ì •ì„ 3ë‹¨ê³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë” í˜„ì‹¤ì ì¸ ìƒê° íë¦„ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì—ì´ì „íŠ¸ ì˜ì‚¬ê²°ì • íë¦„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Step 1: ì‹œê°„ëŒ€ ê²°ì •          Step 2: ì¹´í…Œê³ ë¦¬ ì„ íƒ              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ "ì§€ê¸ˆ ë°°ê³ í”ˆê°€?"  â”‚   â†’    â”‚ "ë­ ë¨¹ì„ê¹Œ?"      â”‚              â”‚
â”‚  â”‚ "ì™¸ì‹í• ê¹Œ?"       â”‚        â”‚ "ì–´ë–¤ ì¢…ë¥˜?"      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â†“                           â†“                          â”‚
â”‚  - skip (ì•ˆë¨¹ìŒ)              - í•œì‹, ì¤‘ì‹, ì¼ì‹...              â”‚
â”‚  - home (ì§‘ë°¥)                - ì¹´í˜, ìˆ ì§‘...                   â”‚
â”‚  - dine_in (ì™¸ì‹)                                               â”‚
â”‚  - delivery (ë°°ë‹¬)                                              â”‚
â”‚                                                                 â”‚
â”‚                     Step 3: ë§¤ì¥ ì„ íƒ                           â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                     â”‚ "ì–´ë”” ê°ˆê¹Œ?"      â”‚                       â”‚
â”‚                     â”‚ + ë¦¬ë·° ì •ë³´ ì°¸ê³   â”‚                       â”‚
â”‚                     â”‚ + í”„ë¡œëª¨ì…˜ í™•ì¸   â”‚                       â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                            â†“                                    â”‚
â”‚                     êµ¬ì²´ì  ë§¤ì¥ ì„ íƒ                             â”‚
â”‚                     (ë¦¬ë·° ê¸°ë°˜ íŒë‹¨)                             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1 Step 1: ì‹œê°„ëŒ€ ê²°ì • (Timeslot Decision)

**ì…ë ¥ ì •ë³´:**
- ì‹œê°„ëŒ€ (ì•„ì¹¨/ì ì‹¬/ì €ë…/ì•¼ê°„)
- ìš”ì¼ (í‰ì¼/ì£¼ë§)
- ë°°ê³ í”” ìˆ˜ì¤€, í”¼ë¡œë„
- ì„¸ê·¸ë¨¼íŠ¸ë³„ ì»¨í…ìŠ¤íŠ¸

**ì¶œë ¥:**
```json
{
  "decision": "dine_in",
  "reason": "ì ì‹¬ì‹œê°„ì´ë¼ ë°°ê°€ ê³ í”„ë‹¤",
  "craving": "í•œì‹",
  "preferred_price": "ë³´í†µ"
}
```

### 2.2 Step 2: ì¹´í…Œê³ ë¦¬ ì„ íƒ (Category Selection)

**ì…ë ¥ ì •ë³´:**
- Step 1ì˜ craving
- ë¯¸ê°ì„±í–¥ (ìê·¹ì„ í˜¸/ë‹´ë°±ê±´ê°•/ë¯¸ì‹íƒêµ¬/í¸ì•ˆí•œë§›)
- ë™í–‰ (í˜¼ì/ì—°ì¸/ê°€ì¡±/ì¹œêµ¬)
- ìµœê·¼ ë°©ë¬¸ ì¹´í…Œê³ ë¦¬

**ì¶œë ¥:**
```json
{
  "category": "í•œì‹",
  "reason": "í¸ì•ˆí•œ êµ­ë°¥ì´ ë¨¹ê³  ì‹¶ë‹¤",
  "alternative": "ì¹¼êµ­ìˆ˜"
}
```

### 2.3 Step 3: ë§¤ì¥ ì„ íƒ (Store Selection)

**ì…ë ¥ ì •ë³´:**
- ì„ íƒëœ ì¹´í…Œê³ ë¦¬
- ì£¼ë³€ ë§¤ì¥ ëª©ë¡ + **ë¦¬ë·° ì •ë³´**
- ì„¸ê·¸ë¨¼íŠ¸/ë¯¸ê°ì„±í–¥/ìƒí™œì–‘ì‹
- ë°›ì€ í”„ë¡œëª¨ì…˜ (ìˆë‹¤ë©´)

**ë¦¬ë·° ì •ë³´ í™œìš©:**
```
[ë§›ìˆëŠ”êµ­ë°¥] (í•œì‹) ë§›:0.82 ê°€ì„±ë¹„:0.75 ì²­ê²°:0.70 ì„œë¹„ìŠ¤:0.68
  í‚¤ì›Œë“œ: êµ­ë¬¼ì´ì§„í•¨, ì–‘ë§ìŒ, ê°€ì„±ë¹„ì¢‹ìŒ
  ë‹¨ì : ì›¨ì´íŒ…ìˆìŒ
```

**ì¶œë ¥:**
```json
{
  "store_name": "ë§›ìˆëŠ”êµ­ë°¥",
  "reason": "ë¦¬ë·° í‰ì ì´ ë†’ê³  êµ­ë¬¼ì´ ì§„í•˜ë‹¤ê³  í•´ì„œ",
  "influenced_by_report": false,
  "expected_satisfaction": "ë†’ìŒ"
}
```

---

## 3. Smart Mode (LLM í˜¸ì¶œ ìµœì í™”)

### ë¬¸ì œ
- 3ë‹¨ê³„ ëª¨ë‘ LLM í˜¸ì¶œ ì‹œ API ë¹„ìš©ê³¼ ì‹œê°„ ì¦ê°€
- ì—ì´ì „íŠ¸ 64ê°œ Ã— ì‹œê°„ëŒ€ 4ê°œ Ã— 7ì¼ = 1,792 ì´ë²¤íŠ¸

### í•´ê²°: Smart Mode
```
Step 1: ê·œì¹™ ê¸°ë°˜ (LLM í˜¸ì¶œ ì—†ìŒ)
Step 2: LLM í˜¸ì¶œ
Step 3: LLM í˜¸ì¶œ

â†’ LLM í˜¸ì¶œ 66% ì ˆì•½!
```

**Step 1 ê·œì¹™ ê¸°ë°˜ ë¡œì§:**
- ì„¸ê·¸ë¨¼íŠ¸ë³„ ì™¸ì‹ í™•ë¥  ì„¤ì •
- ì‹œê°„ëŒ€/ìš”ì¼ë³„ í–‰ë™ íŒ¨í„´
- ë°°ê³ í””/í”¼ë¡œë„ ê¸°ë°˜ íŒë‹¨

```python
# ì˜ˆ: ì ì‹¬ ì‹œê°„ëŒ€ ë¡œì§
if segment in ["ë°ì´íŠ¸ì»¤í”Œ", "ì•½ì†ëª¨ì„", "ë§ì›ìœ ì…ì§ì¥ì¸", "í˜¼ìë°©ë¬¸"]:
    dine_prob = 0.8  # ìœ ë™ì¸êµ¬ëŠ” ì™¸ì‹ í™•ë¥  ë†’ìŒ
elif segment == "ì™¸ë¶€ì¶œí‡´ê·¼ì§ì¥ì¸":
    dine_prob = 0.3 if not is_weekend else 0.6  # í‰ì¼ì—” ì§ì¥ ê·¼ì²˜
else:
    dine_prob = 0.5
```

---

## 4. íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ simulation_layer/
â”‚   â””â”€â”€ persona/
â”‚       â”œâ”€â”€ archetype_generator.py    # 64ì¢… ì•„í‚¤íƒ€ì… ì •ì˜
â”‚       â”œâ”€â”€ agent_state.py            # ì—ì´ì „íŠ¸ ìƒíƒœ (ë°°ê³ í””, í”¼ë¡œë„ ë“±)
â”‚       â””â”€â”€ cognitive_modules/
â”‚           â”œâ”€â”€ decide.py             # ê¸°ì¡´ ë‹¨ì¼ LLM ëª¨ë“ˆ
â”‚           â””â”€â”€ chained_decide.py     # 3ë‹¨ê³„ ì²´ì¸ ëª¨ë“ˆ â­
â”‚
â”œâ”€â”€ ai_layer/
â”‚   â””â”€â”€ prompt_templates/
â”‚       â”œâ”€â”€ timeslot_morning.txt      # Step 1: ì•„ì¹¨ í”„ë¡¬í”„íŠ¸
â”‚       â”œâ”€â”€ timeslot_lunch.txt        # Step 1: ì ì‹¬ í”„ë¡¬í”„íŠ¸
â”‚       â”œâ”€â”€ timeslot_dinner.txt       # Step 1: ì €ë… í”„ë¡¬í”„íŠ¸
â”‚       â”œâ”€â”€ timeslot_night.txt        # Step 1: ì•¼ê°„ í”„ë¡¬í”„íŠ¸
â”‚       â”œâ”€â”€ category_selection.txt    # Step 2: ì¹´í…Œê³ ë¦¬ ì„ íƒ
â”‚       â””â”€â”€ store_selection.txt       # Step 3: ë§¤ì¥ ì„ íƒ â­
â”‚
â””â”€â”€ data_layer/
    â””â”€â”€ store_reviews.py              # ë¦¬ë·° ë°ì´í„° ë¡œë”
```

---

## 5. ì‹¤í–‰ ë°©ë²•

```bash
# 64ì¢… ì•„í‚¤íƒ€ì… + 3ë‹¨ê³„ ì²´ì¸ + Smart Mode (ê¶Œì¥)
python scripts/run_simulation.py --chained --archetype

# Full LLM Mode (ëª¨ë“  ë‹¨ê³„ LLM, ë¹„ìš© ë†’ìŒ)
python scripts/run_simulation.py --chained --archetype --no-smart

# ê¸°ì¡´ ë°©ì‹ (ë‹¨ì¼ LLM)
python scripts/run_simulation.py --use-llm --archetype
```

---

## 6. ê²°ê³¼ ì˜ˆì‹œ

```
================================================================================
Mangwon-dong Agent Simulation
================================================================================
Spatial Mode: StreetNetwork (OSMnx)
Decision Mode: Chained LLM (openai) - Smart(Step1 ê·œì¹™)
Agent Mode: 64 Archetypes (weighted)

Day 1/7: 2025-02-03 (ì›”)
  06:00 - active: 32, visits: 0
  12:00 - active: 30, visits: 17
  18:00 - active: 33, visits: 13
  00:00 - active: 24, visits: 0
...

================================================================================
Simulation complete!
================================================================================
  Total events: 1792
  Active events: 895 (49.9%)
  Visit events: 264 (14.7%)
  Conversion rate: 29.5%
```

---

## 7. ì—ì´ì „íŠ¸ ìƒê° íë¦„ ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì—ì´ì „íŠ¸: ê¹€ë¯¼ì¤€(1ì¸) - 1ì¸ê°€êµ¬ / ìê·¹ì„ í˜¸ / ë³€í™”ì¶”êµ¬           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [12:00 ì ì‹¬]                                                   â”‚
â”‚                                                                 â”‚
â”‚  Step 1: "ì ì‹¬ì´ë„¤... ë°°ê³ í”„ë‹¤. í˜¼ì ì™¸ì‹í• ê¹Œ?"                  â”‚
â”‚          â†’ decision: dine_in, craving: ë§¤ìš´ê±°                   â”‚
â”‚                                                                 â”‚
â”‚  Step 2: "ë§¤ìš´ê±°... ë§ˆë¼íƒ•? ë–¡ë³¶ì´? ë§ˆë¼íƒ• ë¨¹ì€ì§€ ì¢€ ëë„¤"       â”‚
â”‚          â†’ category: ë§ˆë¼íƒ•                                     â”‚
â”‚                                                                 â”‚
â”‚  Step 3: "ë§ˆë¼íƒ•ì§‘ ì–´ë””ê°€ ë§›ìˆì§€?"                               â”‚
â”‚          [ë§ˆë¼ê³µë°©] ë§›:0.85 - ì–¼ì–¼í•œë§›, ì¬ë£Œì‹ ì„                  â”‚
â”‚          [ë¼í™”ì¿µë¶€] ë§›:0.78 - ì–‘ë§ìŒ, ì›¨ì´íŒ…ìˆìŒ                 â”‚
â”‚          â†’ store: ë§ˆë¼ê³µë°© (ë¦¬ë·°ê°€ ë” ì¢‹ì•„ì„œ)                    â”‚
â”‚                                                                 â”‚
â”‚  ê²°ê³¼: ë§ˆë¼ê³µë°© ë°©ë¬¸!                                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. í•µì‹¬ ê°œì„ ì 

| í•­ëª© | ì´ì „ | ì´í›„ |
|------|------|------|
| ì—ì´ì „íŠ¸ ìœ í˜• | ëœë¤ ìƒì„± | 64ì¢… ê³ ì • ì•„í‚¤íƒ€ì… |
| ì˜ì‚¬ê²°ì • | ë‹¨ì¼ LLM í˜¸ì¶œ | 3ë‹¨ê³„ ì²´ì¸ |
| LLM íš¨ìœ¨ | ëª¨ë“  ë‹¨ê³„ í˜¸ì¶œ | Smart Mode (66% ì ˆì•½) |
| ë§¤ì¥ ì„ íƒ | ë¬´ì‘ìœ„/ê±°ë¦¬ ê¸°ë°˜ | ë¦¬ë·° ì ìˆ˜ ê¸°ë°˜ |
| í–‰ë™ ë‹¤ì–‘ì„± | ì œí•œì  | ì„¸ê·¸ë¨¼íŠ¸/ë¯¸ê°/ìƒí™œì–‘ì‹ ì¡°í•© |

---

## 9. ë§¤ì¥ ì¸ì‹ ì‹œìŠ¤í…œ (Spatial Awareness)

ì—ì´ì „íŠ¸ê°€ ì£¼ë³€ ë§¤ì¥ì„ ì–´ë–»ê²Œ ì¸ì‹í•˜ê³  ì •ë³´ë¥¼ í™œìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ìƒì„¸ êµ¬ì¡°ì…ë‹ˆë‹¤.

### 9.1 ë°ì´í„° ì†ŒìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ë°ì´í„° íŒŒì´í”„ë¼ì¸                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  data/raw/stores.csv   â”‚      â”‚  data/raw/split_by_store_id/ â”‚   â”‚
â”‚  â”‚  (756ê°œ ë§¤ì¥)           â”‚      â”‚  (721ê°œ JSON íŒŒì¼)           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ - ì¥ì†Œëª…               â”‚      â”‚ - store_id                 â”‚    â”‚
â”‚  â”‚ - ì¹´í…Œê³ ë¦¬             â”‚      â”‚ - store_name               â”‚    â”‚
â”‚  â”‚ - ìœ„ì¹˜ (lat, lng)      â”‚      â”‚ - ë§› ì ìˆ˜ (0~1)            â”‚    â”‚
â”‚  â”‚ - ì£¼ì†Œ                 â”‚      â”‚ - ê°€ì„±ë¹„ ì ìˆ˜              â”‚    â”‚
â”‚  â”‚ - ì „í™”ë²ˆí˜¸             â”‚      â”‚ - ì²­ê²° ì ìˆ˜                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ - ì„œë¹„ìŠ¤ ì ìˆ˜              â”‚    â”‚
â”‚           â”‚                      â”‚ - ê°ì • ë¼ë²¨ (ê¸ì •/ë¶€ì •)     â”‚    â”‚
â”‚           â”‚                      â”‚ - í‚¤ì›Œë“œ ëª©ë¡              â”‚    â”‚
â”‚           â”‚                      â”‚ - ë‹¨ì /ë¶€ì • í”¼ë“œë°±          â”‚    â”‚
â”‚           â”‚                      â”‚ - RAG ì»¨í…ìŠ¤íŠ¸             â”‚    â”‚
â”‚           â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                   â”‚                     â”‚
â”‚           â–¼                                   â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ì‹œë®¬ë ˆì´ì…˜ ì—”ì§„ì—ì„œ í†µí•©                    â”‚   â”‚
â”‚  â”‚  - stores.csv â†’ StreetNetworkì— ë§¤ì¥ ìœ„ì¹˜ ë¡œë”©               â”‚   â”‚
â”‚  â”‚  - split_by_store_id/ â†’ StoreReviewLoaderì—ì„œ ë¦¬ë·° ë¡œë”©      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 Street Network ê¸°ë°˜ ê³µê°„ ì¸ì‹

ì—ì´ì „íŠ¸ëŠ” **OSM(OpenStreetMap) ë„ë¡œë§** ìœ„ì—ì„œ ì‹¤ì œ ë³´í–‰ìì²˜ëŸ¼ ì´ë™í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Street Network êµ¬ì¡°                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚    OpenStreetMapì—ì„œ ë§ì›ë™ ë°˜ê²½ 2km ë³´í–‰ ë„ë¡œë§ ë¡œë”©               â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚   ê·¸ë˜í”„ êµ¬ì¡°: 6,187 ë…¸ë“œ + 17,316 ì—£ì§€ (ë„ë¡œ)           â”‚     â”‚
â”‚    â”‚                                                         â”‚     â”‚
â”‚    â”‚      (ë…¸ë“œ)â”€â”€â”€â”€(ì—£ì§€/ë„ë¡œ)â”€â”€â”€â”€(ë…¸ë“œ)                      â”‚     â”‚
â”‚    â”‚         â”‚                        â”‚                       â”‚     â”‚
â”‚    â”‚       [ë§¤ì¥A]                  [ë§¤ì¥B]                    â”‚     â”‚
â”‚    â”‚       [ë§¤ì¥C]                  [ë§¤ì¥D]                    â”‚     â”‚
â”‚    â”‚                                                         â”‚     â”‚
â”‚    â”‚   ê° ë§¤ì¥ì€ ê°€ì¥ ê°€ê¹Œìš´ ë…¸ë“œì— "ìŠ¤ëƒ…(snap)"ë¨             â”‚     â”‚
â”‚    â”‚   â†’ 756ê°œ ë§¤ì¥ì´ 300ê°œ ë…¸ë“œì— ë¶„ì‚° ë°°ì¹˜                  â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 ì—ì´ì „íŠ¸ ì´ë™ ë©”ì»¤ë‹ˆì¦˜

```python
# ì—ì´ì „íŠ¸ ì´ë™ ë¡œì§ (street_network.py)

1. ì´ˆê¸°í™”: ëœë¤ ìœ„ì¹˜ â†’ ê°€ì¥ ê°€ê¹Œìš´ ë…¸ë“œì— ìŠ¤ëƒ…
2. ë§¤ ì‹œê°„ëŒ€ë§ˆë‹¤:
   - í˜„ì¬ ë…¸ë“œì—ì„œ ë‹¤ìŒ ë…¸ë“œ ì„ íƒ (ì—­ë°©í–¥ íšŒí”¼)
   - ì—£ì§€(ë„ë¡œ)ë¥¼ ë”°ë¼ ì‹¤ì œ ê±°ë¦¬ë§Œí¼ ì´ë™
   - ì´ë™ ê±°ë¦¬ = ì†ë„(m/s) Ã— ì‹œê°„(dt) Ã— ìŠ¤í… ìˆ˜
3. ìœ„ì¹˜ ë³´ê°„: ì—£ì§€ ìœ„ì˜ ì •í™•í•œ ìœ„ì¹˜ë¥¼ lat/lngë¡œ ë³€í™˜
```

```
ì—ì´ì „íŠ¸ ì´ë™ ì˜ˆì‹œ:

     ì‹œì‘ì                     í˜„ì¬ ìœ„ì¹˜                    ë‹¤ìŒ ë…¸ë“œ
       â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—†â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—
       ë…¸ë“œA                    (ì—£ì§€ ìœ„)                   ë…¸ë“œB
                                   â†‘
                          distance_along_edgeë¡œ
                          ì •í™•í•œ ìœ„ì¹˜ ê³„ì‚°
```

### 9.4 ê·¼ì²˜ ë§¤ì¥ ì¸ì‹ (k-hop Neighbors)

ì—ì´ì „íŠ¸ëŠ” **í˜„ì¬ ë…¸ë“œ ê¸°ì¤€ k-hop ì´ì›ƒ ë…¸ë“œ**ì— ì—°ê²°ëœ ë§¤ì¥ë§Œ "ë³¼ ìˆ˜" ìˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    k-hop ì´ì›ƒ ê¸°ë°˜ ë§¤ì¥ ì¸ì‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   k_ring = 1 (ê¸°ë³¸ê°’)                                               â”‚
â”‚                                                                     â”‚
â”‚                    [ë§¤ì¥1]  [ë§¤ì¥2]                                 â”‚
â”‚                        \    /                                       â”‚
â”‚                      (ì´ì›ƒë…¸ë“œ)                                      â”‚
â”‚                          â”‚                                          â”‚
â”‚   [ë§¤ì¥3]â”€â”€(ì´ì›ƒë…¸ë“œ)â”€â”€(í˜„ì¬ë…¸ë“œ)â”€â”€(ì´ì›ƒë…¸ë“œ)â”€â”€[ë§¤ì¥4]               â”‚
â”‚                          â”‚            \                             â”‚
â”‚                      (ì´ì›ƒë…¸ë“œ)        [ë§¤ì¥5]                       â”‚
â”‚                        /    \                                       â”‚
â”‚                    [ë§¤ì¥6]  [ë§¤ì¥7]                                 â”‚
â”‚                                                                     â”‚
â”‚   visible_stores = [ë§¤ì¥1, ë§¤ì¥2, ë§¤ì¥3, ë§¤ì¥4, ë§¤ì¥5, ë§¤ì¥6, ë§¤ì¥7] â”‚
â”‚                                                                     â”‚
â”‚   â€» k_ring=2ë©´ 2-hopê¹Œì§€ í™•ì¥ â†’ ë” ë§ì€ ë§¤ì¥ ì¸ì‹                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.5 ë¦¬ë·° ë°ì´í„° í†µí•©

`StoreReviewLoader`ê°€ `split_by_store_id/` í´ë”ì˜ JSON íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ ë¦¬ë·° ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

```python
# store_reviews.py - StoreReview ë°ì´í„° êµ¬ì¡°

@dataclass
class StoreReview:
    store_id: str           # "1450813260"
    store_name: str         # "ë§ˆë¼ê³µë°©"
    category: str           # "ì¤‘ì‹"

    # ì ìˆ˜ (0.0 ~ 1.0)
    overall_score: float    # ì¢…í•© í‰ì 
    taste_score: float      # ë§› ì ìˆ˜
    price_value_score: float # ê°€ì„±ë¹„ ì ìˆ˜
    cleanliness_score: float # ì²­ê²° ì ìˆ˜
    service_score: float    # ì„œë¹„ìŠ¤ ì ìˆ˜

    # í…ìŠ¤íŠ¸ ì •ë³´
    sentiment_label: str    # "ë§¤ìš° ê¸ì •ì ", "ê¸ì •ì ", "ë³´í†µ", "ë¶€ì •ì "
    top_keywords: List[str] # ["ì–¼ì–¼í•œë§›", "ì¬ë£Œì‹ ì„ ", "ì–‘ë§ìŒ"]
    critical_feedback: List[str]  # ["ì›¨ì´íŒ…ìˆìŒ", "ì¢ì€ê³µê°„"]
    rag_context: str        # ë¦¬ë·° ìš”ì•½ í…ìŠ¤íŠ¸
```

### 9.6 LLM í”„ë¡¬í”„íŠ¸ì— ì „ë‹¬ë˜ëŠ” ë§¤ì¥ ì •ë³´

Step 3 (ë§¤ì¥ ì„ íƒ)ì—ì„œ LLMì—ê²Œ ì „ë‹¬ë˜ëŠ” ì •ë³´:

```
## ì£¼ë³€ í•œì‹ ë§¤ì¥ ëª©ë¡ (ë¦¬ë·° í¬í•¨)

[ë°±ë…„ì˜¥] í‰ì :ë§¤ìš° ê¸ì •ì  | ë§›:0.88 ê°€ì„±ë¹„:0.82 ì²­ê²°:0.75 ì„œë¹„ìŠ¤:0.80
  í‚¤ì›Œë“œ: êµ­ë¬¼ì§„í•¨, ì–‘ë§ìŒ, ì¹œì ˆí•¨ | ë‹¨ì : ì ì‹¬ì›¨ì´íŒ…

[ì†Œë¬¸ë‚œìˆœëŒ€êµ­] í‰ì :ê¸ì •ì  | ë§›:0.75 ê°€ì„±ë¹„:0.85 ì²­ê²°:0.70 ì„œë¹„ìŠ¤:0.72
  í‚¤ì›Œë“œ: ê°€ì„±ë¹„ì¢‹ìŒ, í‘¸ì§í•¨, ê¹”ë”í•¨ | ë‹¨ì : ì£¼ì°¨ì–´ë ¤ì›€

[ë§ì›ë™ë°±ë°˜ì§‘] í‰ì :ê¸ì •ì  | ë§›:0.72 ê°€ì„±ë¹„:0.78 ì²­ê²°:0.68 ì„œë¹„ìŠ¤:0.70
  í‚¤ì›Œë“œ: ì§‘ë°¥ëŠë‚Œ, ë°˜ì°¬ë‹¤ì–‘, ì–´ë¨¸ë‹ˆì†ë§› | ë‹¨ì : ë©”ë‰´ë‹¨ì¡°ë¡œì›€

[ìƒˆë§ˆì„ì‹ë‹¹ ë§ì›ì ] ë¦¬ë·° ì •ë³´ ì—†ìŒ
```

### 9.7 ë¯¸ê°ì„±í–¥ë³„ ë¦¬ë·° í™œìš© ì „ëµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ë¯¸ê°ì„±í–¥ë³„ ì ìˆ˜ ê°€ì¤‘ì¹˜                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ìê·¹ì„ í˜¸:   ë§›(0.6) + ì¢…í•©(0.4)        â†’ ë§› ìµœìš°ì„                  â”‚
â”‚  ë‹´ë°±ê±´ê°•:   ì²­ê²°(0.4) + ë§›(0.4) + ì¢…í•©(0.2) â†’ ì²­ê²° ì¤‘ì‹œ            â”‚
â”‚  ë¯¸ì‹íƒêµ¬:   ë§›(0.7) + ì¢…í•©(0.3)        â†’ ë§› ì ìˆ˜ ë†’ì€ ê³³ë§Œ         â”‚
â”‚  í¸ì•ˆí•œë§›:   ì„œë¹„ìŠ¤(0.3) + ë§›(0.4) + ì¢…í•©(0.3) â†’ ì„œë¹„ìŠ¤+ë§› ê· í˜•     â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.8 ì „ì²´ ë°ì´í„° íë¦„ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì „ì²´ ë°ì´í„° íë¦„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘]                                                   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚ 1. stores.csv   â”‚ â†’ 756ê°œ ë§¤ì¥ ë¡œë”©                              â”‚
â”‚  â”‚    ë¡œë”©         â”‚ â†’ OSM ë…¸ë“œì— ìŠ¤ëƒ… (300ê°œ ë…¸ë“œì— ë¶„ì‚°)          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚ 2. ì—ì´ì „íŠ¸     â”‚ â†’ 64ê°œ ì—ì´ì „íŠ¸ ê°ê° ëœë¤ ë…¸ë“œì— ë°°ì¹˜          â”‚
â”‚  â”‚    ì´ˆê¸°í™”       â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚  â”‚ 3. ë§¤ ì‹œê°„ëŒ€    â”‚                                                â”‚
â”‚  â”‚    ì‹œë®¬ë ˆì´ì…˜   â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”œâ”€â”€â–¶ ì—ì´ì „íŠ¸ ì´ë™ (street_network.move_agent)                â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”œâ”€â”€â–¶ ê·¼ì²˜ ë§¤ì¥ íƒìƒ‰ (get_nearby_stores, k_ring=1)             â”‚
â”‚       â”‚       â””â”€â”€â–¶ visible_stores: í˜„ì¬ ë…¸ë“œ + ì´ì›ƒ ë…¸ë“œì˜ ë§¤ì¥ë“¤   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”œâ”€â”€â–¶ Step 1: ì™¸ì‹ ì—¬ë¶€ ê²°ì • (ê·œì¹™ ê¸°ë°˜)                       â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”œâ”€â”€â–¶ Step 2: ì¹´í…Œê³ ë¦¬ ì„ íƒ (LLM)                              â”‚
â”‚       â”‚                                                             â”‚
â”‚       â””â”€â”€â–¶ Step 3: ë§¤ì¥ ì„ íƒ (LLM + ë¦¬ë·° ì •ë³´)                      â”‚
â”‚               â”‚                                                     â”‚
â”‚               â”œâ”€â”€â–¶ visible_stores ì¤‘ ì„ íƒëœ ì¹´í…Œê³ ë¦¬ í•„í„°ë§         â”‚
â”‚               â”‚                                                     â”‚
â”‚               â”œâ”€â”€â–¶ split_by_store_id/ì—ì„œ ë¦¬ë·° ì •ë³´ ì¡°íšŒ            â”‚
â”‚               â”‚       â””â”€â”€â–¶ StoreReview: ë§›/ê°€ì„±ë¹„/ì²­ê²°/ì„œë¹„ìŠ¤ ì ìˆ˜  â”‚
â”‚               â”‚                                                     â”‚
â”‚               â””â”€â”€â–¶ LLMì´ ë¦¬ë·° + ì•„í‚¤íƒ€ì… ê¸°ë°˜ìœ¼ë¡œ ìµœì¢… ë§¤ì¥ ì„ íƒ    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.9 ê´€ë ¨ íŒŒì¼ ìƒì„¸

| íŒŒì¼ | ì—­í•  | ì£¼ìš” í•¨ìˆ˜/í´ë˜ìŠ¤ |
|------|------|------------------|
| `data/raw/stores.csv` | 756ê°œ ë§¤ì¥ ê¸°ë³¸ ì •ë³´ | ì¥ì†Œëª…, ì¹´í…Œê³ ë¦¬, lat/lng |
| `data/raw/split_by_store_id/*.json` | 721ê°œ ë§¤ì¥ ë¦¬ë·° ë¶„ì„ | ì ìˆ˜, í‚¤ì›Œë“œ, í”¼ë“œë°± |
| `src/data_layer/street_network.py` | OSM ë„ë¡œë§ + ë§¤ì¥ ì—°ê²° | `StreetNetwork`, `get_nearby_stores()` |
| `src/data_layer/store_reviews.py` | ë¦¬ë·° ë°ì´í„° ë¡œë” | `StoreReviewLoader`, `get_by_name()` |
| `src/simulation_layer/engine.py` | ì‹œë®¬ë ˆì´ì…˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ | `simulate_timestep()` |
| `src/simulation_layer/persona/cognitive_modules/chained_decide.py` | 3ë‹¨ê³„ ì˜ì‚¬ê²°ì • | `_step3_store_selection()` |

### 9.10 ë¦¬ë·° JSON íŒŒì¼ ì˜ˆì‹œ

```json
// data/raw/split_by_store_id/1450813260.json
[
  {
    "store_id": "1450813260",
    "store_name": "ë§ˆë¼ê³µë°© ë§ì›ì ",
    "metadata": {
      "sector": "ì¤‘ì‹",
      "address": "ì„œìš¸ ë§ˆí¬êµ¬ ë§ì›ë™ 123-45"
    },
    "review_metrics": {
      "overall_sentiment": {
        "score": 0.82,
        "label": "ê¸ì •ì "
      },
      "feature_scores": {
        "taste": { "score": 0.85, "count": 127 },
        "price_value": { "score": 0.72, "count": 89 },
        "cleanliness": { "score": 0.68, "count": 45 },
        "service": { "score": 0.70, "count": 56 }
      }
    },
    "top_keywords": ["ì–¼ì–¼í•œë§›", "ì¬ë£Œì‹ ì„ ", "ì–‘ë§ìŒ", "êµ­ë¬¼ì§„í•¨"],
    "critical_feedback": ["ì›¨ì´íŒ…ìˆìŒ", "ì¢ì€ê³µê°„"],
    "rag_context": "ë§ˆë¼ê³µë°©ì€ ì •í†µ ì‚¬ì²œì‹ ë§ˆë¼íƒ• ì „ë¬¸ì ìœ¼ë¡œ..."
  }
]
```

---

## 10. Streamlit ëŒ€ì‹œë³´ë“œ

ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‹œê°í™”í•˜ëŠ” ì›¹ ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.

### 10.1 ì‹¤í–‰ ë°©ë²•

```bash
# ëŒ€ì‹œë³´ë“œ ì‹¤í–‰
streamlit run scripts/dashboard.py

# ë¸Œë¼ìš°ì €ì—ì„œ ìë™ìœ¼ë¡œ ì—´ë¦¼: http://localhost:8501
```

### 10.2 ëŒ€ì‹œë³´ë“œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ—ºï¸ ë§ì›ë™ ì—ì´ì „íŠ¸ ì‹œë®¬ë ˆì´ì…˜ ëŒ€ì‹œë³´ë“œ             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ì‚¬ì´ë“œë°”    â”‚  â”‚                ë©”ì¸ ì˜ì—­                     â”‚  â”‚
â”‚  â”‚             â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ [í•„í„°]      â”‚  â”‚  ğŸ“Š 2025-02-03 í˜„í™©                         â”‚  â”‚
â”‚  â”‚ - ë‚ ì§œ ì„ íƒ â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚  â”‚ - ì‹œê°„ëŒ€    â”‚  â”‚  â”‚ ì´  â”‚í™œì„± â”‚ë°©ë¬¸ â”‚ì „í™˜ìœ¨â”‚                  â”‚  â”‚
â”‚  â”‚   ë©€í‹°ì„ íƒ  â”‚  â”‚  â”‚1792 â”‚ 895 â”‚ 264 â”‚29.5%â”‚                  â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚  â”‚ [ì§„í–‰ìƒí™©]  â”‚  â”‚                                             â”‚  â”‚
â”‚  â”‚ - 7ì¼ ì™„ë£Œ  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ - 1792 ë ˆì½”ë“œâ”‚  â”‚  â”‚  ğŸ—ºï¸ ì§€ë„ ì‹œê°í™”   â”‚  â° ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ â”‚   â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”‚  (Mapbox ê¸°ë°˜)   â”‚  (ë§‰ëŒ€ ê·¸ë˜í”„)    â”‚   â”‚  â”‚
â”‚  â”‚ [ìë™ìƒˆë¡œê³ ì¹¨]â”‚  â”‚  â”‚                  â”‚                  â”‚   â”‚  â”‚
â”‚  â”‚ â˜‘ï¸ 5ì´ˆ ê°„ê²© â”‚  â”‚  â”‚  ì—ì´ì „íŠ¸ ìœ„ì¹˜    â”‚  ğŸª ì¸ê¸° ë§¤ì¥    â”‚   â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”‚  + ë°©ë¬¸ ë§ˆì»¤     â”‚   TOP 10        â”‚   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚                   â”‚                                             â”‚  â”‚
â”‚                   â”‚  ğŸ“ˆ ì¹´í…Œê³ ë¦¬ ë¶„ì„                            â”‚  â”‚
â”‚                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚                   â”‚  â”‚  ğŸ¥§ íŒŒì´ ì°¨íŠ¸     â”‚  ğŸ”¥ íˆíŠ¸ë§µ        â”‚   â”‚  â”‚
â”‚                   â”‚  â”‚  ì¹´í…Œê³ ë¦¬ë³„ ë¹„ìœ¨  â”‚  ì‹œê°„ëŒ€Ã—ì¹´í…Œê³ ë¦¬  â”‚   â”‚  â”‚
â”‚                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚                   â”‚                                             â”‚  â”‚
â”‚                   â”‚  ğŸ‘¥ ì—ì´ì „íŠ¸ í”„ë¡œí•„ ë¶„ì„                     â”‚  â”‚
â”‚                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚                   â”‚  â”‚ì—°ë ¹ëŒ€ë³„â”‚ ì§ì—…ë³„ â”‚ì†Œë“ìˆ˜ì¤€â”‚              â”‚  â”‚
â”‚                   â”‚  â”‚ë§‰ëŒ€ì°¨íŠ¸â”‚ë§‰ëŒ€ì°¨íŠ¸â”‚ë§‰ëŒ€ì°¨íŠ¸â”‚              â”‚  â”‚
â”‚                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚                   â”‚                                             â”‚  â”‚
â”‚                   â”‚  ğŸ“‹ ìµœê·¼ ë°©ë¬¸ ë¡œê·¸ (ìµœê·¼ 20ê±´)               â”‚  â”‚
â”‚                   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚                   â”‚  â”‚ timestamp | agent | store | reason  â”‚   â”‚  â”‚
â”‚                   â”‚  â”‚ 2025-02-03 12:00 | ê¹€ë¯¼ì¤€ | ë§ˆë¼ê³µë°©â”‚   â”‚  â”‚
â”‚                   â”‚  â”‚ ...                                 â”‚   â”‚  â”‚
â”‚                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚                   â”‚                                             â”‚  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.3 ì£¼ìš” ì‹œê°í™” ì»´í¬ë„ŒíŠ¸

#### 10.3.1 í•µì‹¬ ì§€í‘œ (Metrics)

| ì§€í‘œ | ì„¤ëª… | ê³„ì‚° ë°©ì‹ |
|------|------|-----------|
| ì´ ì´ë²¤íŠ¸ | ì„ íƒëœ ë‚ ì§œì˜ ì „ì²´ ì´ë²¤íŠ¸ ìˆ˜ | `len(df_filtered)` |
| í™œì„± ì´ë²¤íŠ¸ | ì—ì´ì „íŠ¸ê°€ í™œë™í•œ ì´ë²¤íŠ¸ | `is_active == True` |
| ë°©ë¬¸ ì´ë²¤íŠ¸ | ì‹¤ì œ ë§¤ì¥ ë°©ë¬¸ | `decision == "visit"` |
| ì „í™˜ìœ¨ | í™œì„± ì¤‘ ë°©ë¬¸ ë¹„ìœ¨ | `ë°©ë¬¸ / í™œì„± Ã— 100%` |

#### 10.3.2 ì§€ë„ ì‹œê°í™” (Mapbox)

```python
# Plotly Express + Mapbox ê¸°ë°˜
fig = px.scatter_mapbox(
    visits,
    lat="current_lat",          # ì—ì´ì „íŠ¸ ìœ„ì¹˜ ìœ„ë„
    lon="current_lng",          # ì—ì´ì „íŠ¸ ìœ„ì¹˜ ê²½ë„
    color="visited_category",   # ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ êµ¬ë¶„
    hover_name="agent_name",    # í˜¸ë²„ ì‹œ ì—ì´ì „íŠ¸ ì´ë¦„
    hover_data=[                # ì¶”ê°€ ì •ë³´
        "visited_store",        # ë°©ë¬¸ ë§¤ì¥
        "time_slot",            # ì‹œê°„ëŒ€
        "decision_reason"       # ë°©ë¬¸ ì´ìœ 
    ],
    zoom=14,                    # ë§ì›ë™ ì¤Œ ë ˆë²¨
)
```

**ì§€ë„ í‘œì‹œ ì •ë³´:**
- ë°©ë¬¸ ìœ„ì¹˜ ë§ˆì»¤ (ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ)
- í˜¸ë²„ ì‹œ: ì—ì´ì „íŠ¸ëª…, ë§¤ì¥ëª…, ì‹œê°„ëŒ€, ë°©ë¬¸ ì´ìœ 
- ì¤‘ì‹¬ì : ë§ì›ë™ (37.555, 126.9075)

#### 10.3.3 ì‹œê°„ëŒ€ë³„ ë¶„ì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ í˜„í™© (ë§‰ëŒ€ ê·¸ë˜í”„)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                       â”‚
â”‚  ì•„ì¹¨  â–ˆâ–ˆâ–ˆâ–ˆ 32 (ë°©ë¬¸: 0)              â”‚
â”‚  ì ì‹¬  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 30 (ë°©ë¬¸: 17)   â”‚
â”‚  ì €ë…  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 33 (ë°©ë¬¸: 13)    â”‚
â”‚  ì•¼ê°„  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 24 (ë°©ë¬¸: 0)            â”‚
â”‚                                       â”‚
â”‚  â€» ì ì‹¬/ì €ë… ì‹œê°„ëŒ€ì— ë°©ë¬¸ ì§‘ì¤‘       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 10.3.4 ì¸ê¸° ë§¤ì¥ TOP 10

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª ì¸ê¸° ë§¤ì¥ TOP 10                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                       â”‚
â”‚  ë§ˆë¼ê³µë°©        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12      â”‚
â”‚  ë°±ë…„ì˜¥          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 9          â”‚
â”‚  ì†Œë¬¸ë‚œìˆœëŒ€êµ­    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 8           â”‚
â”‚  ë§ì›ë™ë°±ë°˜ì§‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 7            â”‚
â”‚  ìŠ¤íƒ€ë²…ìŠ¤        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 6             â”‚
â”‚  ...                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 10.3.5 ì¹´í…Œê³ ë¦¬ ë¶„ì„

**íŒŒì´ ì°¨íŠ¸**: ì „ì²´ ë°©ë¬¸ ì¤‘ ì¹´í…Œê³ ë¦¬ ë¹„ìœ¨
```
í•œì‹: 35%  ì¤‘ì‹: 20%  ì¹´í˜: 18%  ì¼ì‹: 12%  ê¸°íƒ€: 15%
```

**íˆíŠ¸ë§µ**: ì‹œê°„ëŒ€ Ã— ì¹´í…Œê³ ë¦¬ êµì°¨ ë¶„ì„
```
          í•œì‹  ì¤‘ì‹  ì¹´í˜  ì¼ì‹  ì–‘ì‹
ì•„ì¹¨       0     0    2     0     0
ì ì‹¬       8     5    2     3     2
ì €ë…       6     4    1     2     3
ì•¼ê°„       0     0    3     0     1
```

#### 10.3.6 ì—ì´ì „íŠ¸ í”„ë¡œí•„ ë¶„ì„

ì‹œë®¬ë ˆì´ì…˜ì˜ `agents.json`ê³¼ ë°©ë¬¸ ë°ì´í„°ë¥¼ ì¡°ì¸í•˜ì—¬:

| ë¶„ì„ í•­ëª© | ì‹œê°í™” | ì¸ì‚¬ì´íŠ¸ ì˜ˆì‹œ |
|-----------|--------|---------------|
| ì—°ë ¹ëŒ€ë³„ | ë§‰ëŒ€ ì°¨íŠ¸ | "30ëŒ€ê°€ ê°€ì¥ ë§ì´ ë°©ë¬¸" |
| ì§ì—…ë³„ | ë§‰ëŒ€ ì°¨íŠ¸ | "íšŒì‚¬ì› > í”„ë¦¬ëœì„œ > ìì˜ì—…" |
| ì†Œë“ìˆ˜ì¤€ë³„ | ë§‰ëŒ€ ì°¨íŠ¸ | "ì¤‘ì†Œë“ì¸µ ë°©ë¬¸ ë¹„ìœ¨ ë†’ìŒ" |

### 10.4 ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ëŒ€ì‹œë³´ë“œ ë°ì´í„° íë¦„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰]                                                   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  data/output/simulation_result.csv  â†â”€â”€ ì „ì²´ ì´ë²¤íŠ¸ ë¡œê·¸            â”‚
â”‚  data/output/visit_log.csv          â†â”€â”€ ë°©ë¬¸ë§Œ í•„í„°ë§               â”‚
â”‚  data/output/agents.json            â†â”€â”€ 64ê°œ ì—ì´ì „íŠ¸ í”„ë¡œí•„        â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Streamlit ëŒ€ì‹œë³´ë“œ                           â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  @st.cache_data(ttl=5)  â†â”€â”€ 5ì´ˆë§ˆë‹¤ ë°ì´í„° ìƒˆë¡œê³ ì¹¨         â”‚   â”‚
â”‚  â”‚  def load_simulation_data():                                â”‚   â”‚
â”‚  â”‚      return pd.read_csv(SIMULATION_CSV)                     â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  [ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì‹œê°„ ì‹œê°í™”]                                        â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.5 ìë™ ìƒˆë¡œê³ ì¹¨ ë©”ì»¤ë‹ˆì¦˜

```python
# 5ì´ˆë§ˆë‹¤ ìºì‹œ ë§Œë£Œ â†’ ìë™ ë°ì´í„° ë¦¬ë¡œë“œ
@st.cache_data(ttl=5)
def load_simulation_data():
    df = pd.read_csv(SIMULATION_CSV, encoding="utf-8-sig")
    return df
```

**ë™ì‘ ë°©ì‹:**
1. ì‹œë®¬ë ˆì´ì…˜ì´ CSV íŒŒì¼ì— ê²°ê³¼ ì €ì¥
2. ëŒ€ì‹œë³´ë“œê°€ 5ì´ˆë§ˆë‹¤ ìºì‹œ ê°±ì‹ 
3. ìƒˆ ë°ì´í„° ê°ì§€ ì‹œ UI ìë™ ì—…ë°ì´íŠ¸
4. ì‚¬ì´ë“œë°” ì²´í¬ë°•ìŠ¤ë¡œ ìë™ ìƒˆë¡œê³ ì¹¨ ON/OFF

### 10.6 í•„í„°ë§ ê¸°ëŠ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í•„í„° ì˜µì…˜                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ğŸ“… ë‚ ì§œ ì„ íƒ                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ â–¼ 2025-02-03                        â”‚  â† ë“œë¡­ë‹¤ìš´ (ê¸°ë³¸: ìµœì‹ )   â”‚
â”‚  â”‚   2025-02-04                        â”‚                           â”‚
â”‚  â”‚   2025-02-05                        â”‚                           â”‚
â”‚  â”‚   ...                               â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                     â”‚
â”‚  â° ì‹œê°„ëŒ€ ì„ íƒ (ë©€í‹°ì…€ë ‰íŠ¸)                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ â˜‘ï¸ ì•„ì¹¨  â˜‘ï¸ ì ì‹¬  â˜‘ï¸ ì €ë…  â˜‘ï¸ ì•¼ê°„  â”‚  â† ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.7 ì¶œë ¥ íŒŒì¼ ìƒì„¸

| íŒŒì¼ | ìš©ë„ | ì£¼ìš” ì»¬ëŸ¼ |
|------|------|-----------|
| `simulation_result.csv` | ì „ì²´ ì´ë²¤íŠ¸ ë¡œê·¸ | timestamp, agent_id, agent_name, is_active, decision, visited_store, visited_category, decision_reason, current_lat, current_lng |
| `visit_log.csv` | ë°©ë¬¸ ì´ë²¤íŠ¸ë§Œ í•„í„°ë§ | timestamp, agent_name, age_group, gender, weekday, time_slot, visited_store, visited_category, report_received, decision_reason |
| `agents.json` | ì—ì´ì „íŠ¸ í”„ë¡œí•„ | id, name, age, age_group, gender, occupation, income_level, archetype_id, segment, taste, lifestyle |

### 10.8 ëŒ€ì‹œë³´ë“œ ìŠ¤í¬ë¦°ìƒ· ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—ºï¸ ë§ì›ë™ ì—ì´ì „íŠ¸ ì‹œë®¬ë ˆì´ì…˜ ëŒ€ì‹œë³´ë“œ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ğŸ“Š 2025-02-03 í˜„í™©                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•—                 â”‚
â”‚  â•‘ ì´ ì´ë²¤íŠ¸  â•‘ í™œì„± ì´ë²¤íŠ¸ â•‘ ë°©ë¬¸ ì´ë²¤íŠ¸ â•‘  ì „í™˜ìœ¨   â•‘                 â”‚
â”‚  â•‘   256     â•‘    119    â•‘    30     â•‘  25.2%   â•‘                 â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚      ğŸ—ºï¸ ì§€ë„            â”‚  â”‚    â° ì‹œê°„ëŒ€ë³„ ë°©ë¬¸      â”‚         â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚                         â”‚         â”‚
â”‚  â”‚   â”‚  ğŸ”´ í•œì‹       â”‚    â”‚  â”‚  ì•„ì¹¨ â–“â–‘â–‘â–‘â–‘  2         â”‚         â”‚
â”‚  â”‚   â”‚  ğŸ”µ ì¤‘ì‹       â”‚    â”‚  â”‚  ì ì‹¬ â–“â–“â–“â–“â–“ 15        â”‚         â”‚
â”‚  â”‚   â”‚  ğŸŸ¢ ì¹´í˜       â”‚    â”‚  â”‚  ì €ë… â–“â–“â–“â–“â–‘ 12        â”‚         â”‚
â”‚  â”‚   â”‚  ğŸŸ¡ ì¼ì‹       â”‚    â”‚  â”‚  ì•¼ê°„ â–“â–‘â–‘â–‘â–‘  1         â”‚         â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚                         â”‚         â”‚
â”‚  â”‚    (ë§ì›ë™ ì§€ë„)        â”‚  â”‚   ğŸª ì¸ê¸°ë§¤ì¥ TOP10     â”‚         â”‚
â”‚  â”‚                        â”‚  â”‚   ë§ˆë¼ê³µë°© â–“â–“â–“â–“ 5      â”‚         â”‚
â”‚  â”‚                        â”‚  â”‚   ë°±ë…„ì˜¥   â–“â–“â–“â–‘ 4      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“‹ ìµœê·¼ ë°©ë¬¸ ë¡œê·¸                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ì‹œê°„         â”‚ ì—ì´ì „íŠ¸    â”‚ ë§¤ì¥       â”‚ ì¹´í…Œê³ ë¦¬ â”‚ ì´ìœ     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 02-03 18:00 â”‚ ê¹€ë¯¼ì¤€(1ì¸) â”‚ ë§ˆë¼ê³µë°©   â”‚ ì¤‘ì‹    â”‚ ë§¤ìš´ê±°...â”‚   â”‚
â”‚  â”‚ 02-03 18:00 â”‚ ë°•ì„œì—°(ë°ì´íŠ¸)â”‚ ìŠ¤íƒ€ë²…ìŠ¤  â”‚ ì¹´í˜    â”‚ ë¶„ìœ„ê¸°...â”‚   â”‚
â”‚  â”‚ 02-03 12:00 â”‚ ì´í•˜ì€(ì•½ì†) â”‚ ë°±ë…„ì˜¥    â”‚ í•œì‹    â”‚ êµ­ë°¥...  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.9 ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `scripts/dashboard.py` | Streamlit ëŒ€ì‹œë³´ë“œ ë©”ì¸ ì½”ë“œ |
| `data/output/simulation_result.csv` | ì‹œë®¬ë ˆì´ì…˜ ì „ì²´ ë¡œê·¸ |
| `data/output/visit_log.csv` | ë°©ë¬¸ ì´ë²¤íŠ¸ë§Œ í•„í„°ë§ |
| `data/output/agents.json` | ì—ì´ì „íŠ¸ í”„ë¡œí•„ ì •ë³´ |

### 10.10 ëŒ€ì‹œë³´ë“œ ì‹¤í–‰ íŒ

```bash
# 1. ì‹œë®¬ë ˆì´ì…˜ê³¼ ëŒ€ì‹œë³´ë“œ ë™ì‹œ ì‹¤í–‰ (í„°ë¯¸ë„ 2ê°œ)

# í„°ë¯¸ë„ 1: ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
python scripts/run_simulation.py --chained --archetype

# í„°ë¯¸ë„ 2: ëŒ€ì‹œë³´ë“œ ì‹¤í–‰
streamlit run scripts/dashboard.py

# 2. ëŒ€ì‹œë³´ë“œê°€ ìë™ìœ¼ë¡œ 5ì´ˆë§ˆë‹¤ ìƒˆ ë°ì´í„° ê°ì§€
# 3. ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰ì— ë”°ë¼ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
```

---

## 11. í”„ë¡¬í”„íŠ¸ ë¶„ê¸° íë¦„ (Prompt Flow)

3ë‹¨ê³„ ì˜ì‚¬ê²°ì • ì²´ì¸ì—ì„œ ê° ë¶„ê¸°ë§ˆë‹¤ ì–´ë–¤ í”„ë¡¬í”„íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ”ì§€ ìƒì„¸ ì„¤ëª…ì…ë‹ˆë‹¤.

### 11.1 ì „ì²´ ë¶„ê¸° íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      í”„ë¡¬í”„íŠ¸ ë¶„ê¸° íë¦„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [ì—ì´ì „íŠ¸ í™œì„±í™”]                                                   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 1: ì‹œê°„ëŒ€ ê²°ì • (Smart Mode = ê·œì¹™ ê¸°ë°˜)                â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  ì‹œê°„ëŒ€ ë¶„ê¸°:                                                â”‚   â”‚
â”‚  â”‚  â”œâ”€ ì•„ì¹¨ (06:00~10:00) â†’ timeslot_morning.txt (ë˜ëŠ” ê·œì¹™)   â”‚   â”‚
â”‚  â”‚  â”œâ”€ ì ì‹¬ (11:00~14:00) â†’ timeslot_lunch.txt (ë˜ëŠ” ê·œì¹™)     â”‚   â”‚
â”‚  â”‚  â”œâ”€ ì €ë… (17:00~21:00) â†’ timeslot_dinner.txt (ë˜ëŠ” ê·œì¹™)    â”‚   â”‚
â”‚  â”‚  â””â”€ ì•¼ê°„ (21:00~24:00) â†’ timeslot_night.txt (ë˜ëŠ” ê·œì¹™)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 1 ê²°ê³¼ ë¶„ê¸°                                            â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  decision =                                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ "skip"     â†’ ğŸ”´ ì¢…ë£Œ (ì™¸ì‹ ì•ˆ í•¨)                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ "home"     â†’ ğŸ”´ ì¢…ë£Œ (ì§‘ì—ì„œ ì‹ì‚¬)                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ "delivery" â†’ ğŸ”´ ì¢…ë£Œ (ë°°ë‹¬ ì£¼ë¬¸)                         â”‚   â”‚
â”‚  â”‚  â””â”€ "dine_in"  â†’ ğŸŸ¢ Step 2ë¡œ ì§„í–‰                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚ (dine_inì¸ ê²½ìš°ë§Œ)                                         â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 2: ì¹´í…Œê³ ë¦¬ ì„ íƒ (LLM í˜¸ì¶œ)                            â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â†’ category_selection.txt í”„ë¡¬í”„íŠ¸ ì‹¤í–‰                     â”‚   â”‚
â”‚  â”‚  â†’ ë¯¸ê°ì„±í–¥ + craving ê¸°ë°˜ìœ¼ë¡œ ìŒì‹ ì¹´í…Œê³ ë¦¬ ì„ íƒ            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 3: ë§¤ì¥ ì„ íƒ (LLM í˜¸ì¶œ)                                â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  â†’ store_selection.txt í”„ë¡¬í”„íŠ¸ ì‹¤í–‰                        â”‚   â”‚
â”‚  â”‚  â†’ ë¦¬ë·° ì •ë³´ + ì•„í‚¤íƒ€ì… ê¸°ë°˜ìœ¼ë¡œ ìµœì¢… ë§¤ì¥ ì„ íƒ              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚  [ë°©ë¬¸ ê²°ê³¼ ê¸°ë¡]                                                    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 ì‹œê°„ëŒ€ë³„ í”„ë¡¬í”„íŠ¸ (Step 1)

| ì‹œê°„ëŒ€ | í”„ë¡¬í”„íŠ¸ íŒŒì¼ | Smart Mode |
|--------|---------------|------------|
| ì•„ì¹¨ (06:00~10:00) | `timeslot_morning.txt` | ê·œì¹™ ê¸°ë°˜ (LLM ë¯¸ì‚¬ìš©) |
| ì ì‹¬ (11:00~14:00) | `timeslot_lunch.txt` | ê·œì¹™ ê¸°ë°˜ (LLM ë¯¸ì‚¬ìš©) |
| ì €ë… (17:00~21:00) | `timeslot_dinner.txt` | ê·œì¹™ ê¸°ë°˜ (LLM ë¯¸ì‚¬ìš©) |
| ì•¼ê°„ (21:00~24:00) | `timeslot_night.txt` | ê·œì¹™ ê¸°ë°˜ (LLM ë¯¸ì‚¬ìš©) |

**Smart Modeì—ì„œëŠ” Step 1ì—ì„œ LLMì„ í˜¸ì¶œí•˜ì§€ ì•Šê³  ê·œì¹™ ê¸°ë°˜ìœ¼ë¡œ ê²°ì •í•©ë‹ˆë‹¤.**

### 11.3 Step 1: ì‹œê°„ëŒ€ ê²°ì • í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  timeslot_lunch.txt (ì ì‹¬ ì‹œê°„ëŒ€)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ë‹¹ì‹ ì€ ì„œìš¸ ë§ˆí¬êµ¬ ë§ì›ë™ì—ì„œ ì ì‹¬ ì‹œê°„ì„ ë³´ë‚´ê³  ìˆìŠµë‹ˆë‹¤.           â”‚
â”‚                                                                     â”‚
â”‚  ## ë‹¹ì‹ ì˜ í”„ë¡œí•„                                                    â”‚
â”‚  - ì´ë¦„: {agent_name}                                               â”‚
â”‚  - ì„¸ê·¸ë¨¼íŠ¸: {segment}                                              â”‚
â”‚  - ë¯¸ê°ì„±í–¥: {taste}                                                â”‚
â”‚  - ìƒí™œì–‘ì‹: {lifestyle}                                            â”‚
â”‚                                                                     â”‚
â”‚  ## ì ì‹¬ ì‹ì‚¬ ìƒí™©                                                   â”‚
â”‚  - ë°°ê³ í”” ì •ë„: {hunger_level}                                      â”‚
â”‚  - ì•„ì¹¨ ì‹ì‚¬ ì—¬ë¶€: {breakfast_status}                               â”‚
â”‚  - ì˜¤ëŠ˜ ì˜ˆì‚°: {budget_today}                                        â”‚
â”‚                                                                     â”‚
â”‚  ## ë™í–‰ ìƒí™©                                                        â”‚
â”‚  {companion_context}                                                â”‚
â”‚                                                                     â”‚
â”‚  ì„ íƒì§€:                                                            â”‚
â”‚  1. "skip" - ì ì‹¬ ê±´ë„ˆëœ€                                            â”‚
â”‚  2. "home" - ì§‘ì—ì„œ                                                 â”‚
â”‚  3. "dine_in" - ì™¸ì‹                                                â”‚
â”‚                                                                     â”‚
â”‚  JSON: {"decision": "...", "reason": "...", "craving": "...",       â”‚
â”‚         "preferred_price": "..."}                                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.4 Step 2: ì¹´í…Œê³ ë¦¬ ì„ íƒ í”„ë¡¬í”„íŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  category_selection.txt                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ë‹¹ì‹ ì€ ì™¸ì‹ì„ ê²°ì •í–ˆìŠµë‹ˆë‹¤. ì–´ë–¤ ì¢…ë¥˜ì˜ ìŒì‹ì„ ë¨¹ì„ì§€ ì •í•´ì£¼ì„¸ìš”.    â”‚
â”‚                                                                     â”‚
â”‚  ## ë‹¹ì‹ ì˜ í”„ë¡œí•„                                                    â”‚
â”‚  - ë¯¸ê°ì„±í–¥: {taste}                                                â”‚
â”‚  - ìƒí™œì–‘ì‹: {lifestyle}                                            â”‚
â”‚  - ì„ í˜¸ ì¹´í…Œê³ ë¦¬: {store_preferences}                               â”‚
â”‚                                                                     â”‚
â”‚  ## í˜„ì¬ ìƒí™©                                                        â”‚
â”‚  - ì‹œê°„ëŒ€: {time_slot}                                              â”‚
â”‚  - ë™í–‰: {companion}                                                â”‚
â”‚  - ì˜ˆì‚°: {budget_willing}                                           â”‚
â”‚                                                                     â”‚
â”‚  ## ë¨¹ê³  ì‹¶ì€ ê²ƒ (Step 1ì—ì„œ ì „ë‹¬)                                   â”‚
â”‚  craving: "{craving}"                                               â”‚
â”‚                                                                     â”‚
â”‚  ## ìµœê·¼ ë°©ë¬¸ ê¸°ë¡ (ì¤‘ë³µ í”¼í•˜ê¸°)                                     â”‚
â”‚  {recent_categories}                                                â”‚
â”‚                                                                     â”‚
â”‚  ## ì£¼ë³€ ì´ìš© ê°€ëŠ¥ ì¹´í…Œê³ ë¦¬                                          â”‚
â”‚  {available_categories}                                             â”‚
â”‚                                                                     â”‚
â”‚  ë¯¸ê°ì„±í–¥ë³„ ì¶”ì²œ:                                                    â”‚
â”‚  - ìê·¹ì„ í˜¸: ë§ˆë¼íƒ•, ë–¡ë³¶ì´, ë§¤ìš´ê°ˆë¹„ì°œ, ë‹­ë°œ, ê³±ì°½                  â”‚
â”‚  - ë‹´ë°±ê±´ê°•: ìƒëŸ¬ë“œ, í¬ì¼€, ì¹¼êµ­ìˆ˜, ì„¤ë íƒ•, ì¼ì‹                      â”‚
â”‚  - ë¯¸ì‹íƒêµ¬: ì˜¤ë§ˆì¹´ì„¸, íŒŒì¸ë‹¤ì´ë‹, ì´íƒˆë¦¬ì•ˆ, ìŠ¤ì‹œ                    â”‚
â”‚  - í¸ì•ˆí•œë§›: êµ­ë°¥, ë°±ë°˜, ê¹€ì¹˜ì°Œê°œ, ëœì¥ì°Œê°œ, ë¹„ë¹”ë°¥                  â”‚
â”‚                                                                     â”‚
â”‚  JSON: {"category": "...", "reason": "...", "alternative": "..."}   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.5 Step 3: ë§¤ì¥ ì„ íƒ í”„ë¡¬í”„íŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  store_selection.txt                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ë‹¹ì‹ ì€ {category} ì¢…ë¥˜ì˜ ìŒì‹ì„ ë¨¹ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.                    â”‚
â”‚  êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ê°€ê²Œë¥¼ ë°©ë¬¸í• ì§€ ì •í•´ì£¼ì„¸ìš”.                         â”‚
â”‚                                                                     â”‚
â”‚  ## ë‹¹ì‹ ì˜ í”„ë¡œí•„                                                    â”‚
â”‚  - ì„¸ê·¸ë¨¼íŠ¸: {segment}                                              â”‚
â”‚  - ë¯¸ê°ì„±í–¥: {taste}                                                â”‚
â”‚  - ìƒí™œì–‘ì‹: {lifestyle}                                            â”‚
â”‚                                                                     â”‚
â”‚  ## í˜„ì¬ ìƒí™©                                                        â”‚
â”‚  - ë™í–‰: {companion}                                                â”‚
â”‚  - ì˜ˆì‚°: {budget_willing}                                           â”‚
â”‚  - ì‹œê°„ ì—¬ìœ : {time_pressure}                                       â”‚
â”‚                                                                     â”‚
â”‚  ## ì£¼ë³€ {category} ë§¤ì¥ ëª©ë¡ (ë¦¬ë·° í¬í•¨) â­                         â”‚
â”‚  {store_list_with_reviews}                                          â”‚
â”‚                                                                     â”‚
â”‚  ì˜ˆì‹œ:                                                              â”‚
â”‚  [ë°±ë…„ì˜¥] í‰ì :ê¸ì •ì  | ë§›:0.88 ê°€ì„±ë¹„:0.82 ì²­ê²°:0.75 ì„œë¹„ìŠ¤:0.80   â”‚
â”‚    í‚¤ì›Œë“œ: êµ­ë¬¼ì§„í•¨, ì–‘ë§ìŒ | ë‹¨ì : ì›¨ì´íŒ…ìˆìŒ                       â”‚
â”‚                                                                     â”‚
â”‚  ## ìµœê·¼ ë°©ë¬¸í•œ ê°€ê²Œë“¤ (ì°¸ê³ ìš©)                                      â”‚
â”‚  {recent_visits}                                                    â”‚
â”‚                                                                     â”‚
â”‚  ## ë°›ì€ í”„ë¡œëª¨ì…˜/ë¦¬í¬íŠ¸ (ìˆë‹¤ë©´)                                    â”‚
â”‚  {report_info}                                                      â”‚
â”‚                                                                     â”‚
â”‚  ë¯¸ê°ì„±í–¥ë³„ ì„ í˜¸:                                                    â”‚
â”‚  - ìê·¹ì„ í˜¸: ë§› ì ìˆ˜ > ê°€ì„±ë¹„                                       â”‚
â”‚  - ë‹´ë°±ê±´ê°•: ì²­ê²° ì ìˆ˜ ì¤‘ìš”                                         â”‚
â”‚  - ë¯¸ì‹íƒêµ¬: ë§› ì ìˆ˜ ìµœìš°ì„                                          â”‚
â”‚  - í¸ì•ˆí•œë§›: ì„œë¹„ìŠ¤ ì ìˆ˜ ì¤‘ìš”                                       â”‚
â”‚                                                                     â”‚
â”‚  JSON: {"store_name": "...", "reason": "...",                       â”‚
â”‚         "influenced_by_report": true/false,                         â”‚
â”‚         "expected_satisfaction": "..."}                             â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.6 ë¶„ê¸°ë³„ LLM í˜¸ì¶œ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë¶„ê¸°ë³„ LLM í˜¸ì¶œ ì—¬ë¶€                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  Smart Mode (ê¸°ë³¸ê°’):                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 1 (ì‹œê°„ëŒ€)  â”‚  ê·œì¹™ ê¸°ë°˜  â”‚  LLM í˜¸ì¶œ âŒ              â”‚   â”‚
â”‚  â”‚  Step 2 (ì¹´í…Œê³ ë¦¬)â”‚  LLM í˜¸ì¶œ   â”‚  category_selection.txt  â”‚   â”‚
â”‚  â”‚  Step 3 (ë§¤ì¥)    â”‚  LLM í˜¸ì¶œ   â”‚  store_selection.txt     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â†’ LLM í˜¸ì¶œ 2íšŒ/ì—ì´ì „íŠ¸ (66% ì ˆì•½)                                 â”‚
â”‚                                                                     â”‚
â”‚  Full LLM Mode (--no-smart):                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 1 (ì‹œê°„ëŒ€)  â”‚  LLM í˜¸ì¶œ   â”‚  timeslot_*.txt          â”‚   â”‚
â”‚  â”‚  Step 2 (ì¹´í…Œê³ ë¦¬)â”‚  LLM í˜¸ì¶œ   â”‚  category_selection.txt  â”‚   â”‚
â”‚  â”‚  Step 3 (ë§¤ì¥)    â”‚  LLM í˜¸ì¶œ   â”‚  store_selection.txt     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â†’ LLM í˜¸ì¶œ 3íšŒ/ì—ì´ì „íŠ¸                                            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.7 ì¡°ê¸° ì¢…ë£Œ ë¶„ê¸°

Step 1ì—ì„œ ì™¸ì‹ì´ ì•„ë‹Œ ê²°ì •ì´ ë‚˜ì˜¤ë©´ Step 2, 3ì€ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```python
# chained_decide.pyì˜ process() ë©”ì„œë“œ

decision_type = step1.get("decision", "skip")

# ì™¸ì‹ì´ ì•„ë‹ˆë©´ ì—¬ê¸°ì„œ ì¢…ë£Œ (Step 2, 3 ìŠ¤í‚µ)
if decision_type in ["skip", "home", "delivery", "walk"]:
    return {
        "decision": "ignore",
        "decision_reason": step1.get("reason", "ì™¸ì‹ ì•ˆ í•¨"),
        "visited_store": None,
        "visited_category": None,
    }

# dine_inì¸ ê²½ìš°ë§Œ Step 2, 3 ì§„í–‰
```

### 11.8 í”„ë¡¬í”„íŠ¸ ë³€ìˆ˜ ë§¤í•‘

| ë³€ìˆ˜ | ì†ŒìŠ¤ | ì„¤ëª… |
|------|------|------|
| `{agent_name}` | AgentPersona.name | ì—ì´ì „íŠ¸ ì´ë¦„ |
| `{segment}` | Archetype.segment | ì„¸ê·¸ë¨¼íŠ¸ (1ì¸ê°€êµ¬, ë°ì´íŠ¸ì»¤í”Œ ë“±) |
| `{taste}` | Archetype.taste | ë¯¸ê°ì„±í–¥ (ìê·¹ì„ í˜¸, í¸ì•ˆí•œë§› ë“±) |
| `{lifestyle}` | Archetype.lifestyle | ìƒí™œì–‘ì‹ (ë‹¨ì¡°ë¡œìš´íŒ¨í„´, ë³€í™”ì¶”êµ¬) |
| `{hunger_level}` | AgentState.get_hunger_level() | "ë§¤ìš° ë°°ê³ í””", "ë°°ê³ í””", "ë³´í†µ" |
| `{companion}` | AgentState.companion | "í˜¼ì", "ì—°ì¸", "ê°€ì¡±", "ì¹œêµ¬" |
| `{craving}` | Step 1 ê²°ê³¼ | "ë§¤ìš´ê±°", "êµ­ë°¥", "íŒŒìŠ¤íƒ€" ë“± |
| `{recent_categories}` | AgentState.recent_categories | ìµœê·¼ ë°©ë¬¸ ì¹´í…Œê³ ë¦¬ ëª©ë¡ |
| `{store_list_with_reviews}` | StoreReviewLoader | ë¦¬ë·° í¬í•¨ ë§¤ì¥ ëª©ë¡ |
| `{report_info}` | BusinessReport | í”„ë¡œëª¨ì…˜ ì •ë³´ (ìˆë‹¤ë©´) |

### 11.9 í”„ë¡¬í”„íŠ¸ íŒŒì¼ ìœ„ì¹˜

```
src/ai_layer/prompt_templates/
â”œâ”€â”€ timeslot_morning.txt      # Step 1: ì•„ì¹¨ (06:00~10:00)
â”œâ”€â”€ timeslot_lunch.txt        # Step 1: ì ì‹¬ (11:00~14:00)
â”œâ”€â”€ timeslot_dinner.txt       # Step 1: ì €ë… (17:00~21:00)
â”œâ”€â”€ timeslot_night.txt        # Step 1: ì•¼ê°„ (21:00~24:00)
â”œâ”€â”€ category_selection.txt    # Step 2: ì¹´í…Œê³ ë¦¬ ì„ íƒ
â””â”€â”€ store_selection.txt       # Step 3: ë§¤ì¥ ì„ íƒ (ë¦¬ë·° í¬í•¨)
```
